(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{31226:function(e,t,a){Promise.resolve().then(a.bind(a,45233))},45233:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return tb}});var s=a(3827),r=a(64090),l=a(69475),d=a(92379),i=a(74365),n=a(28581),c=a(40834),o=a(31047),x=a(72891),m=a(44715),g=a(505),h=a(19318),u=a(61172),b=a(46578),p=a(26490),y=a(71483),j=a(75504),N=a(51367);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,N.m6)((0,j.W)(t))}let v={status:{Approved:"#22C55E",Rejected:"#EF4444","Technical Review":"#F59E0B",Pending:"#8B5CF6",Inspection:"#06B6D4","Need modification":"#F97316",Consultant:"#EC4899","GIF at Plan(2)":"#14B8A6","Technical Review At Plan 201+R":"#6366F1"},priority:{High:"#EF4444",Medium:"#F59E0B",Low:"#22C55E"},serviceTypes:["#3B82F6","#8B5CF6","#06B6D4","#F59E0B","#EF4444","#22C55E","#EC4899"]};function k(e){return v.status[e]||"#6B7280"}function w(e){return v.priority[e]||"#6B7280"}function C(e){try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(t){return e}}function S(e){return({"Request for Sewerage Connection Point Details":"Connection Point Details","Sewerage Site Inspection":"Site Inspection","Approve the Creation of a New Sewerage Connection Point":"New Connection Point","Obtain Copy of Existing Sewerage Setouts":"Sewerage Setouts Copy","Issue Approval to Modify the Sewerage Manholes Level":"Manholes Modification","Approve Temporary Connection to Sewerage Line":"Temporary Connection","Request for External Sewerage Device Approval":"External Device Approval"})[e]||e}function Z(e){let{title:t,value:a,icon:r,color:l,trend:d,onClick:i}=e;return(0,s.jsxs)("div",{onClick:i,className:f("relative overflow-hidden rounded-2xl bg-white dark:bg-slate-800 p-6 shadow-card hover:shadow-card-hover transition-all duration-300 cursor-pointer group","border border-gray-100 dark:border-slate-700"),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a.toLocaleString()}),d&&(0,s.jsxs)("div",{className:f("flex items-center mt-2 text-sm font-medium",d.isUp?"text-green-600":"text-red-600"),children:[(0,s.jsxs)("span",{children:[d.isUp?"↑":"↓"," ",Math.abs(d.value),"%"]}),(0,s.jsx)("span",{className:"text-gray-400 ml-1",children:"vs last month"})]})]}),(0,s.jsx)("div",{className:f("flex items-center justify-center w-14 h-14 rounded-xl",l),children:r})]}),(0,s.jsx)("div",{className:f("absolute bottom-0 left-0 h-1 transition-all duration-300",l.replace("bg-","bg-").replace("/10",""),"w-0 group-hover:w-full"),style:{backgroundColor:l.includes("blue")?"#3B82F6":l.includes("green")?"#22C55E":l.includes("amber")?"#F59E0B":"#EF4444"}})]})}function T(){let{getFilteredByDrillDown:e,navigateDrillDown:t}=(0,g.useDashboard)(),a=e(),l=(0,r.useMemo)(()=>{let e=a.filter(e=>"Approved"===e.currentStatus).length;return{approved:e,rejected:a.filter(e=>"Rejected"===e.currentStatus).length,inProgress:a.filter(e=>["Technical Review","Pending","Inspection","Consultant","Need modification"].includes(e.currentStatus)).length,opened:a.filter(e=>"Opened"===e.status).length,total:a.length}},[a]);return(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[(0,s.jsx)(Z,{title:"Total Permits",value:l.total,icon:(0,s.jsx)(u.Z,{className:"w-7 h-7 text-blue-600"}),color:"bg-blue-500/10",trend:{value:12,isUp:!0}}),(0,s.jsx)(Z,{title:"Approved",value:l.approved,icon:(0,s.jsx)(b.Z,{className:"w-7 h-7 text-green-600"}),color:"bg-green-500/10",trend:{value:8,isUp:!0},onClick:()=>t("status","Approved")}),(0,s.jsx)(Z,{title:"In Progress",value:l.inProgress,icon:(0,s.jsx)(p.Z,{className:"w-7 h-7 text-amber-600"}),color:"bg-amber-500/10",trend:{value:5,isUp:!1}}),(0,s.jsx)(Z,{title:"Rejected",value:l.rejected,icon:(0,s.jsx)(y.Z,{className:"w-7 h-7 text-red-600"}),color:"bg-red-500/10",trend:{value:3,isUp:!1},onClick:()=>t("status","Rejected")})]})}var A=a(37211),B=a(53348),z=a(85159),D=a(23441),M=a(47095);function R(e){let{isVertical:t=!1}=e,{filters:a,updateFilter:l,resetFilters:d,permits:i}=(0,g.useDashboard)(),[n,c]=(0,r.useState)({serviceType:!0,status:!0,owner:!0,zone:!0,priority:!0}),o=Array.from(new Set(i.map(e=>e.owner))).sort(),x=e=>{c(t=>({...t,[e]:!t[e]}))},m=Object.values(a).filter(e=>"all"!==e).length;return t?(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:(0,s.jsx)(A.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Filters"}),m>0&&(0,s.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[m," active"]})]})]}),m>0&&(0,s.jsxs)("button",{onClick:d,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",children:[(0,s.jsx)(B.Z,{className:"w-3 h-3"}),"Reset"]})]})}),(0,s.jsxs)("div",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:[(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>x("serviceType"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:"all"!==a.serviceType?"text-blue-600 dark:text-blue-400":"",children:["Service Type ","all"!==a.serviceType&&"•"]}),n.serviceType?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),n.serviceType&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("serviceType","all"),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all","all"===a.serviceType?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:"All Types"}),M.Z.lookups.serviceTypes.map(e=>(0,s.jsx)("button",{onClick:()=>l("serviceType",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.serviceType===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>x("status"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:"all"!==a.status?"text-blue-600 dark:text-blue-400":"",children:["Status ","all"!==a.status&&"•"]}),n.status?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),n.status&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("status","all"),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all","all"===a.status?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:"All Statuses"}),M.Z.lookups.statuses.map(e=>(0,s.jsxs)("button",{onClick:()=>l("status",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all flex items-center gap-2",a.status===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)("span",{className:f("w-2 h-2 rounded-full","Opened"===e&&"bg-blue-500","In Progress"===e&&"bg-yellow-500","Under Review"===e&&"bg-purple-500","Approved"===e&&"bg-green-500","Rejected"===e&&"bg-red-500","Closed"===e&&"bg-gray-500")}),e]},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>x("owner"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:"all"!==a.owner?"text-blue-600 dark:text-blue-400":"",children:["Owner ","all"!==a.owner&&"•"]}),n.owner?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),n.owner&&(0,s.jsxs)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>l("owner","all"),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all","all"===a.owner?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:"All Owners"}),o.map(e=>(0,s.jsx)("button",{onClick:()=>l("owner",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all truncate",a.owner===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),title:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>x("zone"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:"all"!==a.zone?"text-blue-600 dark:text-blue-400":"",children:["Zone ","all"!==a.zone&&"•"]}),n.zone?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),n.zone&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("zone","all"),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all","all"===a.zone?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:"All Zones"}),M.Z.lookups.zones.map(e=>(0,s.jsx)("button",{onClick:()=>l("zone",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.zone===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>x("priority"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:"all"!==a.priority?"text-blue-600 dark:text-blue-400":"",children:["Priority ","all"!==a.priority&&"•"]}),n.priority?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),n.priority&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("priority","all"),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all","all"===a.priority?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:"All Priorities"}),M.Z.lookups.priorities.map(e=>(0,s.jsxs)("button",{onClick:()=>l("priority",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all flex items-center gap-2",a.priority===e?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)("span",{className:f("w-2 h-2 rounded-full","High"===e&&"bg-red-500","Medium"===e&&"bg-yellow-500","Low"===e&&"bg-green-500")}),e]},e))]})]})]})]}):(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(A.Z,{className:"w-5 h-5 text-gray-500"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Filters"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Service Type"}),(0,s.jsxs)("select",{value:a.serviceType,onChange:e=>l("serviceType",e.target.value),className:f("w-full px-3 py-2 rounded-lg text-sm","bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600","text-gray-900 dark:text-white","focus:ring-2 focus:ring-blue-500 focus:border-transparent","transition-all duration-200"),children:[(0,s.jsx)("option",{value:"all",children:"All Types"}),M.Z.lookups.serviceTypes.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,s.jsxs)("select",{value:a.status,onChange:e=>l("status",e.target.value),className:f("w-full px-3 py-2 rounded-lg text-sm","bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600","text-gray-900 dark:text-white","focus:ring-2 focus:ring-blue-500 focus:border-transparent","transition-all duration-200"),children:[(0,s.jsx)("option",{value:"all",children:"All Statuses"}),M.Z.lookups.statuses.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Owner"}),(0,s.jsxs)("select",{value:a.owner,onChange:e=>l("owner",e.target.value),className:f("w-full px-3 py-2 rounded-lg text-sm","bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600","text-gray-900 dark:text-white","focus:ring-2 focus:ring-blue-500 focus:border-transparent","transition-all duration-200"),children:[(0,s.jsx)("option",{value:"all",children:"All Owners"}),o.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Zone"}),(0,s.jsxs)("select",{value:a.zone,onChange:e=>l("zone",e.target.value),className:f("w-full px-3 py-2 rounded-lg text-sm","bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600","text-gray-900 dark:text-white","focus:ring-2 focus:ring-blue-500 focus:border-transparent","transition-all duration-200"),children:[(0,s.jsx)("option",{value:"all",children:"All Zones"}),M.Z.lookups.zones.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Priority"}),(0,s.jsxs)("select",{value:a.priority,onChange:e=>l("priority",e.target.value),className:f("w-full px-3 py-2 rounded-lg text-sm","bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600","text-gray-900 dark:text-white","focus:ring-2 focus:ring-blue-500 focus:border-transparent","transition-all duration-200"),children:[(0,s.jsx)("option",{value:"all",children:"All Priorities"}),M.Z.lookups.priorities.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-xs font-medium text-transparent",children:"Reset"}),(0,s.jsxs)("button",{onClick:d,className:f("w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium","bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300","hover:bg-gray-200 dark:hover:bg-slate-600","transition-all duration-200"),children:[(0,s.jsx)(B.Z,{className:"w-4 h-4"}),"Reset"]})]})]})]})}var P=a(22071),L=a(34059),F=a(62457),E=a(61524),O=a(37805),I=a(35005);let W={serviceType:(0,s.jsx)(l.Z,{className:"w-4 h-4"}),status:(0,s.jsx)(P.Z,{className:"w-4 h-4"}),owner:(0,s.jsx)(L.Z,{className:"w-4 h-4"}),zone:(0,s.jsx)(F.Z,{className:"w-4 h-4"}),priority:(0,s.jsx)(E.Z,{className:"w-4 h-4"})},K={serviceType:"Service Types",status:"Status",owner:"Owners",zone:"Zones",priority:"Priority"};function q(){let{drillDown:e,goBackDrillDown:t,resetDrillDown:a}=(0,g.useDashboard)();if(e.breadcrumb.length<=1)return null;let r=s=>{if(0===s)a();else{let a=e.breadcrumb.length-1-s;for(let e=0;e<a;e++)t()}};return(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 px-4 py-3",children:(0,s.jsx)("nav",{className:"flex items-center gap-2 flex-wrap",children:e.breadcrumb.map((t,a)=>{var l;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[a>0&&(0,s.jsx)(O.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("button",{onClick:()=>r(a),className:f("flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",a===e.breadcrumb.length-1?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 cursor-default":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700 hover:text-gray-900 dark:hover:text-white"),disabled:a===e.breadcrumb.length-1,children:[0===a&&(0,s.jsx)(I.Z,{className:"w-4 h-4"}),a>0&&t.type&&W[t.type],(0,s.jsx)("span",{children:(null===(l=t.value)||void 0===l?void 0:l.startsWith("_group_"))&&K[t.value.replace("_group_","")]||t.label})]})]},a)})})})}var _=a(52235),H=a(11213),G=a(3665),V=a(97307),U=a(98998);function Q(){let{selectedPermit:e,isModalOpen:t,closePermitModal:a}=(0,g.useDashboard)();if(!t||!e)return null;let r=k(e.currentStatus),d=w(e.priority);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:a,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden animate-fade-in",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between p-6 border-b border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Permit Details"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.requestNo})]}),(0,s.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:(0,s.jsx)(_.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"".concat(r,"20"),color:r},children:e.currentStatus}),(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium",style:{backgroundColor:"".concat(d,"20"),color:d},children:[e.priority," Priority"]}),(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium ".concat("Opened"===e.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-slate-700 dark:text-gray-300"),children:e.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Service Type"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.serviceType})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(H.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Owner"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.owner})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(F.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Location"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.location})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(G.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Zone"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.zone})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(G.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Category"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.permitCategory})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(V.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Created Date"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:C(e.creationDate)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Last Updated"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:C(e.updatedDate)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(H.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Assigned Employee"})]}),(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.finalEmployee})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Remaining Time"})]}),(0,s.jsx)("p",{className:"font-medium ".concat(e.remainingTime.startsWith("-")?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:e.remainingTime})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(U.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Remarks"})]}),(0,s.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-lg",children:(0,s.jsx)("p",{className:"text-gray-900 dark:text-white",dir:"auto",children:e.finalRemarks})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-slate-700",children:[(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:"Close"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Export PDF"})]})]})]})}var $=a(29733),J=a(86185),X=a(95160),Y=a(46382),ee=a(44968),et=a(74434),ea=a(93832),es=a(56227),er=a(95032),el=a(57976),ed=a(37841),ei=a(49108),en=a(83051),ec=a(63758),eo=a(71969),ex=a(27898),em=a(18025),eg=a(56346),eh=a(26587),eu=a(35618),eb=a(98308),ep=a(74994),ey=a(10166),ej=a(81433),eN=a(38333),ef=a(23356),ev=a(22983),ek=a(78720),ew=a(66363),eC=a(98061),eS=a(94830),eZ=a(43897),eT=a(61828),eA=a(32097),eB=a(94866);let ez=[{id:"serviceType",label:"By Service Type",description:"Analyze by service category",icon:(0,s.jsx)(P.Z,{className:"w-5 h-5"}),type:"serviceType"},{id:"status",label:"By Status",description:"View status distribution",icon:(0,s.jsx)($.Z,{className:"w-5 h-5"}),type:"status"},{id:"owner",label:"By Owner",description:"Workload distribution",icon:(0,s.jsx)(L.Z,{className:"w-5 h-5"}),type:"owner"},{id:"zone",label:"By Zone",description:"Geographic analysis",icon:(0,s.jsx)(F.Z,{className:"w-5 h-5"}),type:"zone"},{id:"priority",label:"By Priority",description:"Priority breakdown",icon:(0,s.jsx)(E.Z,{className:"w-5 h-5"}),type:"priority"}],eD=[{id:"pie",label:"Pie",icon:(0,s.jsx)(J.Z,{className:"w-4 h-4"})},{id:"bar",label:"Bar",icon:(0,s.jsx)(P.Z,{className:"w-4 h-4"})},{id:"horizontalBar",label:"H-Bar",icon:(0,s.jsx)(X.Z,{className:"w-4 h-4 rotate-90"})},{id:"line",label:"Line",icon:(0,s.jsx)(Y.Z,{className:"w-4 h-4"})},{id:"area",label:"Area",icon:(0,s.jsx)(ee.Z,{className:"w-4 h-4"})},{id:"radial",label:"Radial",icon:(0,s.jsx)(et.Z,{className:"w-4 h-4"})}];function eM(e){let t=e.length,a=e.filter(e=>e.remainingTime.startsWith("-")).length,s=e.reduce((e,t)=>e+(parseInt(t.remainingTime.replace(/[^-\d]/g,""))||0),0)/(t||1);return{total:t,breached:a,onTrack:t-a,breachRate:t>0?Math.round(a/t*100):0,avgRemainingTime:Math.abs(Math.round(s))}}function eR(e,t,a){let s=e.filter(e=>"High"===e.priority).length,r=e.filter(e=>e.remainingTime.startsWith("-")).length,l=e.filter(e=>"Opened"===e.status).length,d=e.filter(e=>"Closed"===e.status).length,i=e.reduce((e,t)=>{let a=new Date(t.creationDate),s=Math.abs((new Date(t.updatedDate).getTime()-a.getTime())/864e5);return e+(isNaN(s)?0:s)},0)/(e.length||1);return{name:a,shortName:"serviceType"===t?S(a):a,count:e.length,percentage:0,color:"",avgProcessingDays:Math.round(10*i)/10,highPriorityCount:s,slaBreached:r,opened:l,closed:d}}function eP(e){let{children:t,title:a,onClose:r}=e;return(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 md:p-8",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-slate-700 bg-gradient-to-r from-gray-50 to-white dark:from-slate-800 dark:to-slate-750",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a}),(0,s.jsx)("button",{onClick:r,className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsx)(_.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-6",children:t})]})})}function eL(e){let{chartType:t,setChartType:a}=e;return(0,s.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-slate-700 rounded-lg",children:eD.map(e=>(0,s.jsx)("button",{onClick:()=>a(e.id),title:e.label,className:"p-2 rounded-md transition-all ".concat(t===e.id?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:e.icon},e.id))})}function eF(e){let{viewMode:t,setViewMode:a}=e;return(0,s.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[(0,s.jsxs)("button",{onClick:()=>a("chart"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("chart"===t?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,s.jsx)(J.Z,{className:"w-4 h-4"}),"Charts"]}),(0,s.jsxs)("button",{onClick:()=>a("grid"),className:"flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("grid"===t?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,s.jsx)(ea.Z,{className:"w-4 h-4"}),"Grid"]})]})}function eE(e){let{permits:t}=e,a=(0,r.useMemo)(()=>eM(t),[t]);return(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 rounded-xl p-4 border border-emerald-200 dark:border-emerald-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(es.Z,{className:"w-4 h-4 text-emerald-600"}),(0,s.jsx)("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400",children:"SLA Compliance"})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("span",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:[100-a.breachRate,"%"]}),(0,s.jsx)("span",{className:"text-xs text-emerald-600 mb-1",children:"On Track"})]}),(0,s.jsx)("div",{className:"mt-2 h-2 bg-emerald-200 dark:bg-emerald-900 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-emerald-500 rounded-full transition-all",style:{width:"".concat(100-a.breachRate,"%")}})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 text-red-600"}),(0,s.jsx)("span",{className:"text-xs font-medium text-red-700 dark:text-red-400",children:"SLA Breached"})]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:a.breached}),(0,s.jsxs)("span",{className:"text-xs text-red-600 mb-1",children:["(",a.breachRate,"%)"]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(er.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-400",children:"Active Permits"})]}),(0,s.jsx)("span",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:t.filter(e=>"Opened"===e.status).length})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(el.Z,{className:"w-4 h-4 text-gray-600"}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-400",children:"Closed"})]}),(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:t.filter(e=>"Closed"===e.status).length})]})]})}function eO(e){let{label:t,value:a,icon:r,color:l}=e;return(0,s.jsxs)("div",{className:"".concat({blue:"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 border-blue-100 dark:border-blue-800",green:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-100 dark:border-emerald-800",amber:"bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 border-amber-100 dark:border-amber-800",red:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 border-red-100 dark:border-red-800",violet:"bg-violet-50 dark:bg-violet-900/20 text-violet-600 dark:text-violet-400 border-violet-100 dark:border-violet-800",cyan:"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-600 dark:text-cyan-400 border-cyan-100 dark:border-cyan-800"}[l]," rounded-xl p-3 border flex items-center gap-3 transition-all hover:shadow-sm"),children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-white/50 dark:bg-slate-800/50",children:r}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t})]})]})}function eI(e){let{permits:t}=e,a=(0,r.useMemo)(()=>{let e=t.length,a=t.filter(e=>"High"===e.priority).length,s=t.filter(e=>"Opened"===e.status).length,r=t.filter(e=>"Closed"===e.status).length,l=t.filter(e=>e.remainingTime.startsWith("-")).length,d=new Set(t.map(e=>e.owner)).size,i=new Set(t.map(e=>e.zone)).size,n=t.reduce((e,t)=>{let a=new Date(t.creationDate),s=Math.abs((new Date(t.updatedDate).getTime()-a.getTime())/864e5);return e+(isNaN(s)?0:s)},0)/(e||1);return{total:e,highPriority:a,opened:s,closed:r,slaBreached:l,uniqueOwners:d,uniqueZones:i,avgDays:Math.round(10*n)/10,completionRate:e>0?Math.round(r/e*100):0}},[t]),l=[{label:"Total",value:a.total,color:"blue",icon:(0,s.jsx)(P.Z,{className:"w-4 h-4"})},{label:"Completed",value:"".concat(a.completionRate,"%"),color:"green",icon:(0,s.jsx)(el.Z,{className:"w-4 h-4"})},{label:"Avg Days",value:"".concat(a.avgDays,"d"),color:"amber",icon:(0,s.jsx)(p.Z,{className:"w-4 h-4"})},{label:"High Priority",value:a.highPriority,color:"red",icon:(0,s.jsx)(E.Z,{className:"w-4 h-4"})},{label:"Owners",value:a.uniqueOwners,color:"violet",icon:(0,s.jsx)(L.Z,{className:"w-4 h-4"})},{label:"Zones",value:a.uniqueZones,color:"cyan",icon:(0,s.jsx)(F.Z,{className:"w-4 h-4"})}],d={blue:"from-blue-500/10 to-blue-500/5 border-blue-200 dark:border-blue-800 text-blue-600 dark:text-blue-400",green:"from-emerald-500/10 to-emerald-500/5 border-emerald-200 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400",amber:"from-amber-500/10 to-amber-500/5 border-amber-200 dark:border-amber-800 text-amber-600 dark:text-amber-400",red:"from-red-500/10 to-red-500/5 border-red-200 dark:border-red-800 text-red-600 dark:text-red-400",violet:"from-violet-500/10 to-violet-500/5 border-violet-200 dark:border-violet-800 text-violet-600 dark:text-violet-400",cyan:"from-cyan-500/10 to-cyan-500/5 border-cyan-200 dark:border-cyan-800 text-cyan-600 dark:text-cyan-400"};return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:l.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gradient-to-br ".concat(d[e.color]," rounded-xl p-3 border transition-all hover:shadow-md"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[e.icon,(0,s.jsx)("span",{className:"text-xs font-medium opacity-80",children:e.label})]}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.value})]},t))})}function eW(e){let{data:t,chartType:a,onItemClick:r,height:l=320}=e,d=t.map((e,t)=>({...e,fill:e.color||v.serviceTypes[t%v.serviceTypes.length]})),i=e=>{r&&(null==e?void 0:e.name)&&r(e.name)},n=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-gray-100 dark:border-slate-700 p-4 min-w-[200px]",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:e.shortName||e.name}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Count:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.count})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Percentage:"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.percentage,"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"High Priority:"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:e.highPriorityCount})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"SLA Breached:"}),(0,s.jsx)("span",{className:"font-medium text-orange-600",children:e.slaBreached})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Avg Days:"}),(0,s.jsxs)("span",{className:"font-medium text-blue-600",children:[e.avgProcessingDays,"d"]})]})]})]})}return null},c=Math.min(l/2-10,120);switch(a){case"pie":return(0,s.jsx)(eh.h,{width:"100%",height:l,children:(0,s.jsxs)(eu.u,{children:[(0,s.jsx)(eb.b,{data:d,cx:"50%",cy:"50%",innerRadius:Math.max(.5*c,15),outerRadius:c,paddingAngle:2,dataKey:"count",onClick:i,className:"cursor-pointer",children:d.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.fill,stroke:"white",strokeWidth:2},"cell-".concat(t)))}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})})]})});case"bar":return(0,s.jsx)(eh.h,{width:"100%",height:l,children:(0,s.jsxs)(ej.v,{data:d,margin:{top:10,right:10,left:0,bottom:30},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(ef.K,{dataKey:"shortName",angle:-45,textAnchor:"end",height:50,tick:{fontSize:9},interval:0}),(0,s.jsx)(ev.B,{tick:{fontSize:9},width:30}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})}),(0,s.jsx)(ek.$,{dataKey:"count",onClick:i,className:"cursor-pointer",radius:[4,4,0,0],children:d.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.fill},"cell-".concat(t)))})]})});case"horizontalBar":return(0,s.jsx)(eh.h,{width:"100%",height:Math.max(l,25*d.length),children:(0,s.jsxs)(ej.v,{data:d,layout:"vertical",margin:{top:5,right:10,left:60,bottom:5},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(ef.K,{type:"number",tick:{fontSize:9}}),(0,s.jsx)(ev.B,{dataKey:"shortName",type:"category",width:55,tick:{fontSize:9}}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})}),(0,s.jsx)(ek.$,{dataKey:"count",onClick:i,className:"cursor-pointer",radius:[0,4,4,0],children:d.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.fill},"cell-".concat(t)))})]})});case"line":return(0,s.jsx)(eh.h,{width:"100%",height:l,children:(0,s.jsxs)(ew.w,{data:d,margin:{top:10,right:10,left:0,bottom:30},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(ef.K,{dataKey:"shortName",angle:-45,textAnchor:"end",height:50,tick:{fontSize:9},interval:0}),(0,s.jsx)(ev.B,{tick:{fontSize:9},width:30}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})}),(0,s.jsx)(eC.x,{type:"monotone",dataKey:"count",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",strokeWidth:1,r:4,cursor:"pointer"},activeDot:{r:6,cursor:"pointer",onClick:(e,t)=>i(t.payload)}})]})});case"area":return(0,s.jsx)(eh.h,{width:"100%",height:l,children:(0,s.jsxs)(eS.T,{data:d,margin:{top:10,right:10,left:0,bottom:30},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",className:"opacity-30"}),(0,s.jsx)(ef.K,{dataKey:"shortName",angle:-45,textAnchor:"end",height:50,tick:{fontSize:9},interval:0}),(0,s.jsx)(ev.B,{tick:{fontSize:9},width:30}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorCount",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]})}),(0,s.jsx)(eZ.u,{type:"monotone",dataKey:"count",stroke:"#3B82F6",strokeWidth:2,fill:"url(#colorCount)"})]})});case"radial":let o=d.slice(0,6),x=Math.max(8,Math.min(20,l/10));return(0,s.jsx)(eh.h,{width:"100%",height:l,children:(0,s.jsxs)(eT.B,{cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"95%",barSize:x,data:o,startAngle:180,endAngle:-180,children:[(0,s.jsx)(eA.G,{background:!0,dataKey:"count",onClick:i,className:"cursor-pointer"}),(0,s.jsx)(ey.u,{content:(0,s.jsx)(n,{})})]})});default:return null}}function eK(e){let{permits:t,groupBy:a,onViewDetails:l}=e,[d,i]=(0,r.useState)(new Set),[n,c]=(0,r.useState)({}),o=e=>{switch(a){case"serviceType":return e.serviceType;case"status":return e.currentStatus;case"owner":return e.owner;case"zone":return e.zone;case"priority":return e.priority;default:return""}},x=(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{let a=o(t);e[a]||(e[a]=[]),e[a].push(t)}),Object.entries(e).sort((e,t)=>t[1].length-e[1].length)},[t,a]),m=e=>{i(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,s.jsx)("div",{className:"space-y-3",children:x.map(e=>{let[t,r]=e,i=d.has(t),o=n[t]||1,x=Math.ceil(r.length/5),g=r.slice((o-1)*5,5*o),h=eR(r,a,t),u=eM(r);return(0,s.jsxs)("div",{className:"border border-gray-200 dark:border-slate-700 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>m(t),className:"w-full flex items-center justify-between p-4 bg-gray-50 dark:bg-slate-700/50 hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat(i?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-200 dark:bg-slate-600"),children:i?(0,s.jsx)(z.Z,{className:"w-5 h-5 text-blue-600"}):(0,s.jsx)(D.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:"serviceType"===a?S(t):t}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.length," permits"]})]})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"SLA Compliance"}),(0,s.jsxs)("p",{className:"font-semibold ".concat(u.breachRate>20?"text-red-600":"text-green-600"),children:[100-u.breachRate,"%"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"High Priority"}),(0,s.jsx)("p",{className:"font-semibold text-red-600",children:h.highPriorityCount})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Avg Days"}),(0,s.jsxs)("p",{className:"font-semibold text-blue-600",children:[h.avgProcessingDays,"d"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Open/Closed"}),(0,s.jsxs)("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:[h.opened,"/",h.closed]})]})]})]}),i&&(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"md:hidden grid grid-cols-4 gap-2 p-3 bg-gray-50/50 dark:bg-slate-800/50",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"SLA"}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:[100-u.breachRate,"%"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"High"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-red-600",children:h.highPriorityCount})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Days"}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:[h.avgProcessingDays,"d"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Status"}),(0,s.jsxs)("p",{className:"text-sm font-semibold",children:[h.opened,"/",h.closed]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 dark:bg-slate-700/30",children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Request"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Owner"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Priority"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"SLA"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-gray-100 dark:divide-slate-700",children:g.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400",children:e.requestNo}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(k(e.currentStatus),"20"),color:k(e.currentStatus)},children:e.currentStatus})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:e.owner}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(w(e.priority),"20"),color:w(e.priority)},children:e.priority})}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("span",{className:"text-xs font-medium ".concat(e.remainingTime.startsWith("-")?"text-red-600":"text-green-600"),children:e.remainingTime.startsWith("-")?"Breached":"On Track"})}),(0,s.jsx)("td",{className:"px-4 py-2",children:(0,s.jsx)("button",{onClick:()=>l(e),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:(0,s.jsx)(ed.Z,{className:"w-4 h-4"})})})]},e.id))})]})}),x>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Page ",o," of ",x]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>c(e=>({...e,[t]:Math.max(1,o-1)})),disabled:1===o,className:"p-1 rounded border disabled:opacity-50",children:(0,s.jsx)(ei.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>c(e=>({...e,[t]:Math.min(x,o+1)})),disabled:o===x,className:"p-1 rounded border disabled:opacity-50",children:(0,s.jsx)(O.Z,{className:"w-4 h-4"})})]})]})]})]},t)})})}function eq(e){let{permits:t,onViewDetails:a}=e,[l,d]=(0,r.useState)(1),i=Math.ceil(t.length/10),n=t.slice((l-1)*10,10*l);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"overflow-x-auto rounded-xl border border-gray-200 dark:border-slate-700",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-slate-700",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 dark:bg-slate-700/50",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Request No"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Service Type"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Owner"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Zone"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Priority"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"SLA"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-gray-100 dark:divide-slate-700",children:n.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-blue-600 dark:text-blue-400",children:e.requestNo}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300 max-w-[200px] truncate",title:e.serviceType,children:S(e.serviceType)}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(k(e.currentStatus),"20"),color:k(e.currentStatus)},children:e.currentStatus})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:e.owner}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:e.zone}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(w(e.priority),"20"),color:w(e.priority)},children:e.priority})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"text-xs font-medium ".concat(e.remainingTime.startsWith("-")?"text-red-600":"text-green-600"),children:e.remainingTime.startsWith("-")?"Breached":"On Track"})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("button",{onClick:()=>a(e),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(ed.Z,{className:"w-4 h-4"})})})]},e.id))})]})}),i>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(l-1)*10+1," to ",Math.min(10*l,t.length)," of ",t.length]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===l,className:"p-2 rounded-lg border border-gray-200 dark:border-slate-700 disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsx)(ei.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",l," of ",i]}),(0,s.jsx)("button",{onClick:()=>d(e=>Math.min(i,e+1)),disabled:l===i,className:"p-2 rounded-lg border border-gray-200 dark:border-slate-700 disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:(0,s.jsx)(O.Z,{className:"w-4 h-4"})})]})]})]})}function e_(e){let{dimension:t,onDrillDown:a,onExpandAll:l,onShowAsTable:d,onFocusMode:i,mode:n,onModeChange:c,showExpandAll:o=!0}=e,[x,m]=(0,r.useState)(null),[g,h]=(0,r.useState)(!1),u=[{id:"drill",icon:(0,s.jsx)(en.Z,{className:"w-3.5 h-3.5"}),label:"Drill Down",tooltip:"filter"===n?"Click chart to filter":"Click to drill into group",action:()=>a(t,"_group_".concat(t))},...o?[{id:"expand",icon:(0,s.jsx)(ec.Z,{className:"w-3.5 h-3.5"}),label:"Expand All",tooltip:"Expand to next level",action:l}]:[],{id:"focus",icon:(0,s.jsx)(ec.Z,{className:"w-3.5 h-3.5"}),label:"Focus Mode",tooltip:"Expand to full screen",action:i},{id:"table",icon:(0,s.jsx)(eo.Z,{className:"w-3.5 h-3.5"}),label:"Show as Table",tooltip:"View data as table",action:d}];return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[c&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!g),onBlur:()=>setTimeout(()=>h(!1),150),className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium transition-all ".concat("filter"===n?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400"),children:["filter"===n?(0,s.jsx)(A.Z,{className:"w-3 h-3"}):(0,s.jsx)(ex.Z,{className:"w-3 h-3"}),(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),g&&(0,s.jsxs)("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 py-1 z-50 min-w-[140px]",children:[(0,s.jsxs)("button",{onClick:()=>{c("filter"),h(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("filter"===n?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(A.Z,{className:"w-3.5 h-3.5"}),"Filter Mode"]}),(0,s.jsxs)("button",{onClick:()=>{c("groupBy"),h(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("groupBy"===n?"text-violet-600 bg-violet-50 dark:bg-violet-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(ex.Z,{className:"w-3.5 h-3.5"}),"Group Mode"]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-0.5 bg-gray-100 dark:bg-slate-700 rounded-lg p-0.5",children:u.map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:e.action,onMouseEnter:()=>m(e.id),onMouseLeave:()=>m(null),className:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white dark:hover:bg-slate-600 transition-all",title:e.tooltip,children:e.icon}),x===e.id&&(0,s.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap z-50",children:[e.tooltip,(0,s.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]},e.id))})]})}function eH(e){let{title:t,icon:a,data:l,chartType:d,dimension:i,onDrillDown:n,onChartTypeChange:c,mode:o,onModeChange:x}=e,[m,g]=(0,r.useState)(!1),[h,u]=(0,r.useState)(!1),b=l.slice(0,5),p=l.reduce((e,t)=>e+t.count,0),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return m?(0,s.jsx)("div",{className:"h-[".concat(e,"px] overflow-auto"),style:{height:e},children:(0,s.jsxs)("table",{className:"w-full text-xs",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("th",{className:"text-left py-2 px-2 font-medium text-gray-600 dark:text-gray-400",children:"Name"}),(0,s.jsx)("th",{className:"text-right py-2 px-2 font-medium text-gray-600 dark:text-gray-400",children:"Count"}),(0,s.jsx)("th",{className:"text-right py-2 px-2 font-medium text-gray-600 dark:text-gray-400",children:"%"}),(0,s.jsx)("th",{className:"text-right py-2 px-2 font-medium text-gray-600 dark:text-gray-400",children:"High"}),(0,s.jsx)("th",{className:"text-right py-2 px-2 font-medium text-gray-600 dark:text-gray-400",children:"SLA"})]})}),(0,s.jsx)("tbody",{children:l.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>n(i,e.name),children:[(0,s.jsxs)("td",{className:"py-1.5 px-2 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"truncate text-gray-700 dark:text-gray-300",children:e.shortName})]}),(0,s.jsx)("td",{className:"py-1.5 px-2 text-right font-medium text-gray-900 dark:text-white",children:e.count}),(0,s.jsxs)("td",{className:"py-1.5 px-2 text-right text-gray-500",children:[e.percentage,"%"]}),(0,s.jsx)("td",{className:"py-1.5 px-2 text-right text-red-600",children:e.highPriorityCount}),(0,s.jsx)("td",{className:"py-1.5 px-2 text-right",children:(0,s.jsx)("span",{className:e.slaBreached>0?"text-red-600":"text-green-600",children:e.slaBreached})})]},t))})]})}):(0,s.jsx)("div",{style:{height:e},children:(0,s.jsx)(eW,{data:l,chartType:d,onItemClick:e=>n(i,e),height:e})})};return(0,s.jsxs)(s.Fragment,{children:[h&&(0,s.jsx)(eP,{title:t,onClose:()=>u(!1),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:a}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[p," total items"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[x&&(0,s.jsxs)("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[(0,s.jsxs)("button",{onClick:()=>x("filter"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-all ".concat("filter"===o?"bg-blue-600 text-white shadow":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-600"),children:[(0,s.jsx)(A.Z,{className:"w-3.5 h-3.5"}),"Filter"]}),(0,s.jsxs)("button",{onClick:()=>x("groupBy"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-all ".concat("groupBy"===o?"bg-violet-600 text-white shadow":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-600"),children:[(0,s.jsx)(ex.Z,{className:"w-3.5 h-3.5"}),"Group By"]})]}),(0,s.jsx)("button",{onClick:()=>g(!m),className:"p-2 rounded-lg transition-all ".concat(m?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:(0,s.jsx)(eo.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"flex items-center gap-0.5 bg-gray-100 dark:bg-slate-700 rounded-lg p-0.5",children:eD.map(e=>(0,s.jsx)("button",{onClick:()=>c(i,e.id),className:"p-2 rounded-md transition-all ".concat(d===e.id?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),children:e.icon},e.id))})]})]}),y(400),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:l.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>n(i,e.name),className:"flex items-center gap-2 p-3 rounded-lg bg-gray-50 dark:bg-slate-700/50 hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.shortName}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.count," (",e.percentage,"%)"]})]})]},t))})]})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-gray-50 to-white dark:from-slate-800 dark:to-slate-750",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:a}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[p," total"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e_,{dimension:i,onDrillDown:n,onShowAsTable:()=>g(!m),onFocusMode:()=>u(!0),mode:o,onModeChange:x,showExpandAll:!1}),(0,s.jsx)("div",{className:"flex items-center gap-0.5 bg-gray-100 dark:bg-slate-700 rounded-lg p-0.5",children:eD.slice(0,4).map(e=>(0,s.jsx)("button",{onClick:()=>c(i,e.id),className:"p-1.5 rounded-md transition-all ".concat(d===e.id?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),children:e.icon},e.id))})]})]}),(0,s.jsx)("div",{className:"p-4",children:y(200)}),!m&&(0,s.jsxs)("div",{className:"px-4 pb-4 space-y-1",children:[b.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>n(i,e.name),className:"w-full flex items-center justify-between py-1.5 px-2 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors group text-left",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-xs text-gray-700 dark:text-gray-300 truncate",children:e.shortName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:e.count}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.percentage,"%)"]}),(0,s.jsx)(em.Z,{className:"w-3 h-3 text-gray-400 opacity-0 group-hover:opacity-100"})]})]},t)),l.length>5&&(0,s.jsxs)("p",{className:"text-xs text-gray-400 text-center pt-1",children:["+",l.length-5," more"]})]})]})]})}function eG(e){let{permits:t,onDrillDown:a,mode:l,onModeChange:d}=e,[i,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),g=(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.owner]||(e[t.owner]={total:0,high:0,breached:0}),e[t.owner].total++,"High"===t.priority&&e[t.owner].high++,t.remainingTime.startsWith("-")&&e[t.owner].breached++}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,total:a.total,high:a.high,breached:a.breached,onTrack:a.total-a.breached}}).sort((e,t)=>t.total-e.total).slice(0,8)},[t]),h=[{id:"drill",icon:(0,s.jsx)(en.Z,{className:"w-3.5 h-3.5"}),tooltip:"Drill into owner data",action:()=>{}},{id:"expand",icon:(0,s.jsx)(ec.Z,{className:"w-3.5 h-3.5"}),tooltip:"Focus mode",action:()=>o(!0)},{id:"table",icon:(0,s.jsx)(eo.Z,{className:"w-3.5 h-3.5"}),tooltip:"Show as table",action:()=>{}}],u=(0,s.jsx)("div",{className:"h-[200px]",children:(0,s.jsx)(eh.h,{width:"100%",height:"100%",children:(0,s.jsxs)(ej.v,{data:g,layout:"vertical",margin:{left:0,right:20},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,className:"opacity-30"}),(0,s.jsx)(ef.K,{type:"number",tick:{fontSize:10}}),(0,s.jsx)(ev.B,{type:"category",dataKey:"name",tick:{fontSize:10},width:80,tickFormatter:e=>e.split(" ").slice(0,2).join(" ")}),(0,s.jsx)(ey.u,{content:e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-100 dark:border-slate-700 p-3",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:e.name}),(0,s.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Total:"}),(0,s.jsx)("span",{className:"font-medium",children:e.total})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"On Track:"}),(0,s.jsx)("span",{className:"font-medium text-green-600",children:e.onTrack})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Breached:"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:e.breached})]})]})]})}return null}}),(0,s.jsx)(ek.$,{dataKey:"onTrack",stackId:"a",fill:"#10B981",radius:[0,0,0,0],cursor:"pointer",onClick:e=>a("owner",e.name)}),(0,s.jsx)(ek.$,{dataKey:"breached",stackId:"a",fill:"#EF4444",radius:[0,4,4,0],cursor:"pointer",onClick:e=>a("owner",e.name)})]})})});return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(eP,{title:"Owner Workload Analysis",onClose:()=>o(!1),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-[400px]",children:(0,s.jsx)(eh.h,{width:"100%",height:"100%",children:(0,s.jsxs)(ej.v,{data:g,layout:"vertical",margin:{left:0,right:20},children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,className:"opacity-30"}),(0,s.jsx)(ef.K,{type:"number",tick:{fontSize:12}}),(0,s.jsx)(ev.B,{type:"category",dataKey:"name",tick:{fontSize:12},width:120}),(0,s.jsx)(ey.u,{}),(0,s.jsx)(eB.D,{}),(0,s.jsx)(ek.$,{dataKey:"onTrack",name:"On Track",stackId:"a",fill:"#10B981",radius:[0,0,0,0],cursor:"pointer",onClick:e=>a("owner",e.name)}),(0,s.jsx)(ek.$,{dataKey:"breached",name:"Breached",stackId:"a",fill:"#EF4444",radius:[0,4,4,0],cursor:"pointer",onClick:e=>a("owner",e.name)})]})})}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:g.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>a("owner",e.name),className:"p-3 rounded-lg bg-gray-50 dark:bg-slate-700/50 hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors text-left",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.total," total"]}),(0,s.jsxs)("span",{className:"text-xs text-green-600",children:[e.onTrack," ✓"]}),(0,s.jsxs)("span",{className:"text-xs text-red-600",children:[e.breached," ✗"]})]})]},t))})]})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-violet-100 dark:bg-violet-900/30 text-violet-600",children:(0,s.jsx)(L.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Owner Workload"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Workload distribution & SLA status"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>m(!x),onBlur:()=>setTimeout(()=>m(!1),150),className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium transition-all ".concat("filter"===l?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400"),children:["filter"===l?(0,s.jsx)(A.Z,{className:"w-3 h-3"}):(0,s.jsx)(ex.Z,{className:"w-3 h-3"}),(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),x&&(0,s.jsxs)("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 py-1 z-50 min-w-[140px]",children:[(0,s.jsxs)("button",{onClick:()=>{d("filter"),m(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("filter"===l?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(A.Z,{className:"w-3.5 h-3.5"}),"Filter Mode"]}),(0,s.jsxs)("button",{onClick:()=>{d("groupBy"),m(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("groupBy"===l?"text-violet-600 bg-violet-50 dark:bg-violet-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(ex.Z,{className:"w-3.5 h-3.5"}),"Group Mode"]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-0.5 bg-gray-100 dark:bg-slate-700 rounded-lg p-0.5",children:h.map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:e.action,onMouseEnter:()=>n(e.id),onMouseLeave:()=>n(null),className:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white dark:hover:bg-slate-600 transition-all",children:e.icon}),i===e.id&&(0,s.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap z-50",children:[e.tooltip,(0,s.jsx)("div",{className:"absolute top-full right-3 border-4 border-transparent border-t-gray-900"})]})]},e.id))})]})]}),u]})]})}function eV(e){let{permits:t,onDrillDown:a,mode:l,onModeChange:d}=e,[i,n]=(0,r.useState)(null),[c,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),g=(0,r.useMemo)(()=>{let e={};t.forEach(t=>{e[t.zone]||(e[t.zone]={total:0,high:0,breached:0}),e[t.zone].total++,"High"===t.priority&&e[t.zone].high++,t.remainingTime.startsWith("-")&&e[t.zone].breached++});let a=["#10B981","#3B82F6","#8B5CF6","#F59E0B","#EC4899","#06B6D4"];return Object.entries(e).map((e,t)=>{let[s,r]=e;return{name:s,total:r.total,high:r.high,breached:r.breached,breachRate:r.total>0?Math.round(r.breached/r.total*100):0,color:a[t%a.length]}}).sort((e,t)=>t.total-e.total)},[t]),h=Math.max(...g.map(e=>e.total)),u=[{id:"drill",icon:(0,s.jsx)(en.Z,{className:"w-3.5 h-3.5"}),tooltip:"Drill into zone",action:()=>{}},{id:"expand",icon:(0,s.jsx)(ec.Z,{className:"w-3.5 h-3.5"}),tooltip:"Focus mode",action:()=>o(!0)},{id:"table",icon:(0,s.jsx)(eo.Z,{className:"w-3.5 h-3.5"}),tooltip:"Show as table",action:()=>{}}],b=(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:g.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>a("zone",e.name),className:"relative p-4 rounded-xl border-2 border-gray-100 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 transition-all group overflow-hidden",style:{background:"linear-gradient(135deg, ".concat(e.color,"15 0%, ").concat(e.color,"05 100%)")},children:[(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 transition-all",style:{height:"".concat(e.total/h*60,"%"),background:"".concat(e.color,"30")}}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.name}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.total}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(e.breachRate>20?"text-red-600":"text-green-600"),children:[e.breachRate,"% breach"]}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,s.jsxs)("span",{className:"text-xs text-orange-600",children:[e.high," high"]})]})]}),(0,s.jsx)(em.Z,{className:"absolute top-3 right-3 w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},e.name))});return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(eP,{title:"Zone Distribution Analysis",onClose:()=>o(!1),children:(0,s.jsx)("div",{className:"space-y-4",children:b})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600",children:(0,s.jsx)(F.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Zone Distribution"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Geographic permit analysis"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[d&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>m(!x),onBlur:()=>setTimeout(()=>m(!1),150),className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg text-xs font-medium transition-all ".concat("filter"===l?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400"),children:["filter"===l?(0,s.jsx)(A.Z,{className:"w-3 h-3"}):(0,s.jsx)(ex.Z,{className:"w-3 h-3"}),(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),x&&(0,s.jsxs)("div",{className:"absolute top-full right-0 mt-1 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 py-1 z-50 min-w-[140px]",children:[(0,s.jsxs)("button",{onClick:()=>{d("filter"),m(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("filter"===l?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(A.Z,{className:"w-3.5 h-3.5"}),"Filter Mode"]}),(0,s.jsxs)("button",{onClick:()=>{d("groupBy"),m(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors ".concat("groupBy"===l?"text-violet-600 bg-violet-50 dark:bg-violet-900/20":"text-gray-700 dark:text-gray-300"),children:[(0,s.jsx)(ex.Z,{className:"w-3.5 h-3.5"}),"Group Mode"]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-0.5 bg-gray-100 dark:bg-slate-700 rounded-lg p-0.5",children:u.map(e=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:e.action,onMouseEnter:()=>n(e.id),onMouseLeave:()=>n(null),className:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white dark:hover:bg-slate-600 transition-all",children:e.icon}),i===e.id&&(0,s.jsxs)("div",{className:"absolute bottom-full right-0 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap z-50",children:[e.tooltip,(0,s.jsx)("div",{className:"absolute top-full right-3 border-4 border-transparent border-t-gray-900"})]})]},e.id))})]})]}),b]})]})}function eU(e){let{mode:t}=e,{filteredPermits:a,navigateDrillDown:l,openPermitModal:d}=(0,g.useDashboard)(),[i,n]=(0,r.useState)("chart"),[c,o]=(0,r.useState)(t),[x,m]=(0,r.useState)({serviceType:"horizontalBar",status:"pie",priority:"pie",owner:"bar",zone:"bar"}),h=(e,t)=>{m(a=>({...a,[e]:t}))},u=(e,t)=>{"groupBy"===c?l(e,"_group_".concat(e)):l(e,t)},b=e=>{let t=t=>{switch(e){case"serviceType":return t.serviceType;case"status":return t.currentStatus;case"owner":return t.owner;case"zone":return t.zone;case"priority":return t.priority;default:return""}},s={};a.forEach(e=>{let a=t(e);s[a]||(s[a]=[]),s[a].push(e)});let r=a.length;return Object.entries(s).map((t,a)=>{let[s,l]=t;return{...eR(l,e,s),percentage:r>0?Math.round(l.length/r*100):0,color:"status"===e?k(s):"priority"===e?w(s):v.serviceTypes[a%v.serviceTypes.length]}}).sort((e,t)=>t.count-e.count)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,s.jsx)("div",{className:"col-span-12 sm:col-span-4 lg:col-span-2 flex flex-col items-center justify-center",children:(0,s.jsxs)("div",{className:"relative w-28 h-28",children:[(0,s.jsx)(eh.h,{width:"100%",height:"100%",children:(0,s.jsx)(eT.B,{cx:"50%",cy:"50%",innerRadius:"70%",outerRadius:"100%",barSize:10,data:[{name:"Compliance",value:100-eM(a).breachRate,fill:"#10B981"}],startAngle:180,endAngle:0,children:(0,s.jsx)(eA.G,{background:{fill:"#E5E7EB"},dataKey:"value",cornerRadius:10})})}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,s.jsxs)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[100-eM(a).breachRate,"%"]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"SLA"})]})]})}),(0,s.jsxs)("div",{className:"col-span-12 sm:col-span-8 lg:col-span-6 grid grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg bg-green-50 dark:bg-green-900/20",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:eM(a).onTrack}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"On Track"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg bg-red-50 dark:bg-red-900/20",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:eM(a).breached}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Breached"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:a.filter(e=>"Opened"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg bg-gray-50 dark:bg-slate-700",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-gray-600 dark:text-gray-400",children:a.filter(e=>"Closed"===e.status).length}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Closed"})]})]}),(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4 flex flex-col justify-center gap-2",children:[{name:"High",value:a.filter(e=>"High"===e.priority).length,color:"#EF4444",bg:"bg-red-500"},{name:"Medium",value:a.filter(e=>"Medium"===e.priority).length,color:"#F59E0B",bg:"bg-amber-500"},{name:"Low",value:a.filter(e=>"Low"===e.priority).length,color:"#10B981",bg:"bg-emerald-500"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 w-12",children:e.name}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full ".concat(e.bg," rounded-full transition-all"),style:{width:"".concat(a.length>0?e.value/a.length*100:0,"%")}})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 w-8 text-right",children:e.value})]},e.name))})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[(0,s.jsx)(eO,{label:"Total Permits",value:a.length,icon:(0,s.jsx)(P.Z,{className:"w-4 h-4"}),color:"blue"}),(0,s.jsx)(eO,{label:"Completion",value:"".concat(Math.round(a.filter(e=>"Closed"===e.status).length/a.length*100)||0,"%"),icon:(0,s.jsx)(el.Z,{className:"w-4 h-4"}),color:"green"}),(0,s.jsx)(eO,{label:"High Priority",value:a.filter(e=>"High"===e.priority).length,icon:(0,s.jsx)(E.Z,{className:"w-4 h-4"}),color:"red"}),(0,s.jsx)(eO,{label:"Unique Owners",value:new Set(a.map(e=>e.owner)).size,icon:(0,s.jsx)(L.Z,{className:"w-4 h-4"}),color:"violet"}),(0,s.jsx)(eO,{label:"Active Zones",value:new Set(a.map(e=>e.zone)).size,icon:(0,s.jsx)(F.Z,{className:"w-4 h-4"}),color:"cyan"}),(0,s.jsx)(eO,{label:"Avg Days",value:"".concat(Math.round(a.reduce((e,t)=>e+Math.abs((new Date(t.updatedDate).getTime()-new Date(t.creationDate).getTime())/864e5),0)/(a.length||1)*10)/10,"d"),icon:(0,s.jsx)(p.Z,{className:"w-4 h-4"}),color:"amber"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Data Analysis Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"filter"===c?"Click any chart element to filter":"Click to group and expand"})]}),(0,s.jsx)(eF,{viewMode:i,setViewMode:n})]}),"chart"===i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,s.jsx)(eH,{title:"By Status",icon:(0,s.jsx)($.Z,{className:"w-4 h-4"}),data:b("status"),chartType:x.status,dimension:"status",onDrillDown:u,onChartTypeChange:h,mode:c,onModeChange:o}),(0,s.jsx)(eH,{title:"By Priority",icon:(0,s.jsx)(E.Z,{className:"w-4 h-4"}),data:b("priority"),chartType:x.priority,dimension:"priority",onDrillDown:u,onChartTypeChange:h,mode:c,onModeChange:o}),(0,s.jsx)(eH,{title:"By Service Type",icon:(0,s.jsx)(P.Z,{className:"w-4 h-4"}),data:b("serviceType"),chartType:x.serviceType,dimension:"serviceType",onDrillDown:u,onChartTypeChange:h,mode:c,onModeChange:o})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(eG,{permits:a,onDrillDown:u,mode:c,onModeChange:o}),(0,s.jsx)(eV,{permits:a,onDrillDown:u,mode:c,onModeChange:o})]})]}):"groupBy"===c?(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Grouped Data View"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Select a grouping dimension:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:ez.map(e=>(0,s.jsxs)("button",{onClick:()=>u(e.type,"_group_".concat(e.type)),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 hover:text-blue-700 dark:hover:text-blue-400 transition-colors",children:[e.icon,(0,s.jsx)("span",{className:"text-sm font-medium",children:e.label}),(0,s.jsx)(em.Z,{className:"w-4 h-4"})]},e.id))})]}),(0,s.jsx)(eq,{permits:a,onViewDetails:d})]}):(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:(0,s.jsx)(eq,{permits:a,onViewDetails:d})})]})}function eQ(e){let{data:t,onItemClick:a,maxValue:r}=e;return(0,s.jsx)("div",{className:"relative w-full h-[300px] rounded-xl overflow-hidden border border-gray-200 dark:border-slate-700",children:(0,s.jsx)("div",{className:"absolute inset-0 flex flex-wrap",children:t.map((e,t)=>(e.percentage,(0,s.jsxs)("div",{onClick:()=>null==a?void 0:a(e),className:"relative group cursor-pointer transition-all duration-300 hover:z-10 hover:scale-[1.02] border border-white/20",style:{backgroundColor:e.color,flexGrow:e.value,flexBasis:"".concat(Math.max(150,3*e.percentage),"px"),minHeight:"80px"},children:[(0,s.jsxs)("div",{className:"absolute inset-2 flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-white text-sm drop-shadow-md truncate",children:e.shortName}),(0,s.jsxs)("p",{className:"text-white/80 text-xs",children:[e.value," permits"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex-1 bg-white/20 rounded-full h-1.5",children:(0,s.jsx)("div",{className:"h-full rounded-full bg-white/80",style:{width:"".concat(e.slaRate,"%")}})}),(0,s.jsxs)("span",{className:"text-xs text-white/90 font-medium",children:[e.slaRate,"%"]})]})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-3 transform scale-95 group-hover:scale-100 transition-transform",children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:e.name}),(0,s.jsxs)("div",{className:"mt-2 space-y-1 text-xs",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Permits:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.value})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"SLA Rate:"}),(0,s.jsxs)("span",{className:"font-medium ".concat(e.slaRate>=80?"text-green-600":e.slaRate>=50?"text-amber-600":"text-red-600"),children:[e.slaRate,"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"High Priority:"}),(0,s.jsx)("span",{className:"font-medium text-orange-600",children:e.highPriority})]})]}),(0,s.jsxs)("button",{className:"mt-2 w-full text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center justify-center gap-1",children:[(0,s.jsx)(en.Z,{className:"w-3 h-3"}),"Drill Down"]})]})})]},e.name)))})})}function e$(e){let{data:t,dimension:a,onDrillDown:l,availableDimensions:d,getSubGroups:i}=e,[n,c]=(0,r.useState)(null),[o,x]=(0,r.useState)(null),m=Math.max(...t.map(e=>e.count));return(0,s.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>{var a;let r=n===e.name,g=r&&o?i(e.permits,o):[],h=g.length>0?Math.max(...g.map(e=>e.count)):0;return(0,s.jsxs)("div",{className:"relative",children:[t>0&&(0,s.jsx)("div",{className:"absolute -top-3 left-6 w-px h-3 bg-gray-300 dark:bg-slate-600"}),(0,s.jsxs)("div",{className:"relative rounded-xl border-2 transition-all duration-300 ".concat(r?"border-blue-400 dark:border-blue-500 bg-blue-50/50 dark:bg-blue-900/20":"border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 hover:border-gray-300 dark:hover:border-slate-600"),children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 rounded-l-xl",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"p-4 pl-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:(0,s.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:e.shortName}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.count," permits • ",e.percentage,"%"]})]})}),(0,s.jsx)("div",{className:"flex-1 max-w-[200px] hidden sm:block",children:(0,s.jsxs)("div",{className:"h-8 bg-gray-100 dark:bg-slate-700 rounded-lg overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 rounded-lg transition-all duration-500",style:{width:"".concat(e.count/m*100,"%"),backgroundColor:e.color}}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-end pr-2",children:(0,s.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:e.count})})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.slaMetrics.breachRate<=10?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":e.slaMetrics.breachRate<=30?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[100-e.slaMetrics.breachRate,"% SLA"]}),e.stats.highPriorityCount>0&&(0,s.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",children:[e.stats.highPriorityCount," High"]})]}),d.length>0&&(0,s.jsx)("button",{onClick:()=>{if(r)c(null),x(null);else{var t;c(e.name),x((null===(t=d[0])||void 0===t?void 0:t.type)||null)}},className:"p-2 rounded-lg transition-all ".concat(r?"bg-blue-100 dark:bg-blue-900/30 text-blue-600":"bg-gray-100 dark:bg-slate-700 text-gray-500 hover:bg-gray-200 dark:hover:bg-slate-600"),children:r?(0,s.jsx)(z.Z,{className:"w-4 h-4"}):(0,s.jsx)(D.Z,{className:"w-4 h-4"})})]}),r&&d.length>0&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Break down by:"}),(0,s.jsx)("div",{className:"flex gap-1",children:d.map(e=>(0,s.jsxs)("button",{onClick:()=>x(e.type),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ".concat(o===e.type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-600"),children:[e.icon,e.label.replace("By ","")]},e.id))})]}),o&&g.length>0&&(0,s.jsxs)("div",{className:"relative pl-8",children:[(0,s.jsx)("div",{className:"absolute left-3 top-0 bottom-0 w-px bg-gray-300 dark:bg-slate-600"}),(0,s.jsxs)("div",{className:"space-y-2",children:[g.slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,s.jsx)("div",{className:"absolute -left-5 top-1/2 w-5 h-px bg-gray-300 dark:bg-slate-600"}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-3 p-2 rounded-lg bg-gray-50 dark:bg-slate-700/50 border border-gray-200 dark:border-slate-600",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate flex-1",children:e.shortName}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-20 h-2 bg-gray-200 dark:bg-slate-600 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(e.count/h*100,"%"),backgroundColor:e.color}})}),(0,s.jsx)("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 w-8 text-right",children:e.count})]})]})]},e.name)),g.length>5&&(0,s.jsxs)("p",{className:"text-xs text-gray-400 pl-4",children:["+",g.length-5," more"]})]}),(0,s.jsxs)("button",{onClick:()=>o&&l(o),className:"mt-3 ml-0 flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-medium transition-colors",children:[(0,s.jsx)(en.Z,{className:"w-3.5 h-3.5"}),"Add ",o&&(null===(a=d.find(e=>e.type===o))||void 0===a?void 0:a.label.replace("By ",""))," as Group Level"]})]})]})]})]})]},e.name)})})}function eJ(e){let{data:t,onItemClick:a,dimension:r}=e,l=Math.max(...t.map(e=>e.count));return(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:t.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>null==a?void 0:a(e),className:"group relative bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden cursor-pointer hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-600 transition-all duration-300",children:[(0,s.jsx)("div",{className:"h-1.5",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm mb-1 truncate group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:e.shortName}),(0,s.jsxs)("div",{className:"flex items-baseline gap-1 mb-3",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.count}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"permits"})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("div",{className:"h-2 bg-gray-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:"".concat(e.count/l*100,"%"),backgroundColor:e.color}})})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 block",children:"SLA"}),(0,s.jsxs)("span",{className:"font-semibold ".concat(e.slaMetrics.breachRate<=10?"text-green-600":e.slaMetrics.breachRate<=30?"text-amber-600":"text-red-600"),children:[100-e.slaMetrics.breachRate,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500 block",children:"High"}),(0,s.jsx)("span",{className:"font-semibold text-orange-600",children:e.stats.highPriorityCount})]})]})]}),(0,s.jsx)("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,s.jsx)(en.Z,{className:"w-3.5 h-3.5 text-blue-600"})})})]},e.name))})}function eX(e){var t;let{groupedData:a,permits:l,currentGroupDimension:d,onViewPermit:i,typeLabels:n}=e,[c,o]=(0,r.useState)(new Set([null===(t=a[0])||void 0===t?void 0:t.name])),[x,m]=(0,r.useState)("requestNo"),[g,h]=(0,r.useState)("asc"),[u,b]=(0,r.useState)(""),p=e=>{o(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},y=e=>{x===e?h(e=>"asc"===e?"desc":"asc"):(m(e),h("asc"))},j=e=>[...e].sort((e,t)=>{let a,s;switch(x){case"requestNo":default:a=e.requestNo,s=t.requestNo;break;case"status":a=e.currentStatus,s=t.currentStatus;break;case"owner":a=e.owner,s=t.owner;break;case"priority":a=e.priority,s=t.priority;break;case"creationDate":a=new Date(e.creationDate),s=new Date(t.creationDate)}return a<s?"asc"===g?-1:1:a>s?"asc"===g?1:-1:0}),N=e=>{if(!u)return e;let t=u.toLowerCase();return e.filter(e=>e.requestNo.toLowerCase().includes(t)||e.owner.toLowerCase().includes(t)||e.currentStatus.toLowerCase().includes(t)||e.serviceType.toLowerCase().includes(t))},f=e=>{let{field:t,label:a}=e;return(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-600 transition-colors",onClick:()=>y(t),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a,x===t&&(0,s.jsx)("span",{className:"text-blue-500",children:"asc"===g?"↑":"↓"})]})})};return(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-900/50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search permits...",value:u,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)(A.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:[l.length," total permits"]}),(0,s.jsx)("span",{className:"text-gray-300",children:"|"}),(0,s.jsx)("button",{onClick:()=>o(new Set(a.map(e=>e.name))),className:"text-blue-600 hover:text-blue-700",children:"Expand All"}),(0,s.jsx)("button",{onClick:()=>o(new Set),className:"text-blue-600 hover:text-blue-700",children:"Collapse All"})]})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:a.map(e=>{let t=c.has(e.name),a=j(N(e.permits));return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 px-4 py-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",onClick:()=>p(e.name),children:[(0,s.jsx)(O.Z,{className:"w-4 h-4 text-gray-400 transition-transform ".concat(t?"rotate-90":"")}),(0,s.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.shortName}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.count," permits)"]}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,s.jsxs)("span",{className:"px-2 py-0.5 rounded-full ".concat(e.slaMetrics.breachRate<=10?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":e.slaMetrics.breachRate<=30?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[100-e.slaMetrics.breachRate,"% SLA"]}),(0,s.jsxs)("span",{className:"text-green-600",children:[e.stats.opened," open"]}),(0,s.jsxs)("span",{className:"text-gray-400",children:[e.stats.closed," closed"]})]})]}),t&&(0,s.jsx)("div",{className:"bg-gray-50/50 dark:bg-slate-900/30",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 dark:bg-slate-700/50",children:[(0,s.jsx)(f,{field:"requestNo",label:"Request #"}),(0,s.jsx)(f,{field:"status",label:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Service Type"}),(0,s.jsx)(f,{field:"owner",label:"Owner"}),(0,s.jsx)(f,{field:"priority",label:"Priority"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Zone"}),(0,s.jsx)(f,{field:"creationDate",label:"Created"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300",children:"SLA"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:0===a.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"No permits match your search"})}):a.map(e=>(0,s.jsxs)("tr",{className:"bg-white dark:bg-slate-800 hover:bg-blue-50 dark:hover:bg-slate-700/50 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"font-medium text-blue-600 hover:text-blue-700 cursor-pointer",onClick:()=>i(e),children:e.requestNo})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(k(e.currentStatus),"20"),color:k(e.currentStatus)},children:e.currentStatus})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400 max-w-[200px] truncate",title:e.serviceType,children:S(e.serviceType)}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:e.owner}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(w(e.priority),"20"),color:w(e.priority)},children:e.priority})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:e.zone}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:C(e.creationDate)}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-medium ".concat(e.remainingTime.startsWith("-")?"text-red-600":"text-green-600"),children:e.remainingTime}),e.remainingTime.startsWith("-")&&(0,s.jsx)(E.Z,{className:"w-3.5 h-3.5 text-red-500"})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("button",{onClick:()=>i(e),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 rounded transition-colors",children:(0,s.jsx)(ed.Z,{className:"w-4 h-4"})})})]},e.id))})]})})})]},e.name)})})]})}function eY(e){let{mode:t}=e,{drillDown:a,navigateDrillDown:l,getFilteredByDrillDown:d,openPermitModal:i}=(0,g.useDashboard)(),[n,c]=(0,r.useState)(new Set),[o,x]=(0,r.useState)({}),[m,h]=(0,r.useState)("tree"),u=(0,r.useMemo)(()=>{for(let t=a.breadcrumb.length-1;t>=0;t--){var e;let s=a.breadcrumb[t];if(null===(e=s.value)||void 0===e?void 0:e.startsWith("_group_"))return s.value.replace("_group_","")}return"status"},[a.breadcrumb]),b=(0,r.useMemo)(()=>{let e=new Set;return a.breadcrumb.forEach(t=>{var a;(null===(a=t.value)||void 0===a?void 0:a.startsWith("_group_"))&&e.add(t.value.replace("_group_",""))}),e},[a.breadcrumb]),p=(0,r.useMemo)(()=>ez.filter(e=>!b.has(e.type)),[b]),y=d(),j=(e,t)=>{switch(t){case"serviceType":return e.serviceType;case"status":return e.currentStatus;case"owner":return e.owner;case"zone":return e.zone;case"priority":return e.priority;default:return""}},N=(0,r.useMemo)(()=>{let e={};return y.forEach(t=>{let a=j(t,u);e[a]||(e[a]=[]),e[a].push(t)}),Object.entries(e).map((e,t)=>{let[a,s]=e;return{name:a,shortName:"serviceType"===u?S(a):a,permits:s,count:s.length,percentage:Math.round(s.length/y.length*100),color:"status"===u?k(a):"priority"===u?w(a):v.serviceTypes[t%v.serviceTypes.length],stats:eR(s,u,a),slaMetrics:eM(s)}}).sort((e,t)=>t.count-e.count)},[y,u]),f=e=>{c(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},C=e=>{l(e,"_group_".concat(e))},Z=e=>o[e]||"pie",T=(e,t)=>{let a={};e.forEach(e=>{let s=j(e,t);a[s]||(a[s]=[]),a[s].push(e)});let s=e.length;return Object.entries(a).map((e,a)=>{let[r,l]=e;return{...eR(l,t,r),percentage:s>0?Math.round(l.length/s*100):0,color:"status"===t?k(r):"priority"===t?w(r):v.serviceTypes[a%v.serviceTypes.length]}}).sort((e,t)=>t.count-e.count)},A={serviceType:"Service Type",status:"Status",owner:"Owner",zone:"Zone",priority:"Priority"},B=N.map(e=>({name:e.name,shortName:e.shortName,value:e.count,percentage:e.percentage,color:e.color,slaRate:100-e.slaMetrics.breachRate,highPriority:e.stats.highPriorityCount})),z=[{id:"tree",label:"Tree",icon:(0,s.jsx)(ex.Z,{className:"w-4 h-4"})},{id:"treemap",label:"Treemap",icon:(0,s.jsx)(ea.Z,{className:"w-4 h-4"})},{id:"cards",label:"Cards",icon:(0,s.jsx)(eg.Z,{className:"w-4 h-4"})},{id:"list",label:"List",icon:(0,s.jsx)(eo.Z,{className:"w-4 h-4"})},{id:"data",label:"Data",icon:(0,s.jsx)(ed.Z,{className:"w-4 h-4"})}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsx)(ex.Z,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["Grouped by ",A[u]]})]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-3 text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:[y.length," permits"]}),(0,s.jsx)("span",{className:"text-gray-300 dark:text-slate-600",children:"|"}),(0,s.jsxs)("span",{className:"text-gray-500",children:[N.length," groups"]}),(0,s.jsx)("span",{className:"text-gray-300 dark:text-slate-600",children:"|"}),(0,s.jsxs)("span",{className:"text-gray-500",children:[b.size," level",1!==b.size?"s":""]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 mr-1",children:"View:"}),(0,s.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-slate-700 rounded-lg",children:z.map(e=>(0,s.jsxs)("button",{onClick:()=>h(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-all ".concat(m===e.id?"bg-white dark:bg-slate-600 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:[e.icon,(0,s.jsx)("span",{className:"hidden md:inline",children:e.label})]},e.id))})]})]}),p.length>0&&(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Add group level:"}),p.map(e=>(0,s.jsxs)("button",{onClick:()=>C(e.type),className:"flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-slate-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-600 dark:text-gray-400 hover:text-blue-700 dark:hover:text-blue-400 rounded-lg text-xs font-medium transition-colors border border-transparent hover:border-blue-200 dark:hover:border-blue-800",children:[e.icon,(0,s.jsx)("span",{children:A[e.type]}),(0,s.jsx)(em.Z,{className:"w-3 h-3 opacity-50"})]},e.id))]})})]}),"treemap"===m&&(0,s.jsx)(eQ,{data:B,maxValue:Math.max(...B.map(e=>e.value)),onItemClick:e=>{p.length}}),"cards"===m&&(0,s.jsx)(eJ,{data:N,dimension:u,onItemClick:e=>{p.length>0&&f(e.name)}}),"tree"===m&&(0,s.jsx)(e$,{data:N,dimension:u,onDrillDown:C,availableDimensions:p,getSubGroups:T}),"list"===m&&(0,s.jsx)("div",{className:"space-y-3",children:N.map((e,t)=>{var a;let r=n.has(e.name);return Z(e.name),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",onClick:()=>f(e.name),children:[(0,s.jsx)("div",{className:"w-1 h-10 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white truncate block",children:e.shortName}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[e.count," permits"]})]}),(0,s.jsx)("div",{className:"flex-1 max-w-[150px] hidden lg:block",children:(0,s.jsx)("div",{className:"h-2 bg-gray-100 dark:bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(e.percentage,"%"),backgroundColor:e.color}})})}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[(0,s.jsxs)("div",{className:"px-2 py-1 rounded-full font-medium ".concat(e.slaMetrics.breachRate<=10?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":e.slaMetrics.breachRate<=30?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[100-e.slaMetrics.breachRate,"% SLA"]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-green-600",children:[e.stats.opened," open"]}),(0,s.jsxs)("span",{className:"text-gray-400",children:[e.stats.closed," closed"]}),(0,s.jsxs)("span",{className:"text-red-500",children:[e.stats.slaBreached," breached"]})]})]}),(0,s.jsx)(D.Z,{className:"w-4 h-4 text-gray-400 transition-transform ".concat(r?"rotate-180":"")})]}),r&&(0,s.jsxs)("div",{className:"border-t border-gray-100 dark:border-slate-700 p-4 bg-gray-50/50 dark:bg-slate-900/50",children:[p.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Breakdown by:"}),p.slice(0,3).map(e=>(0,s.jsxs)("button",{onClick:t=>{t.stopPropagation(),C(e.type)},className:"flex items-center gap-1 px-2 py-1 bg-white dark:bg-slate-700 rounded border border-gray-200 dark:border-slate-600 text-xs hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[e.icon,(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:A[e.type]})]},e.id))]}),(0,s.jsx)("div",{className:"space-y-2",children:T(e.permits,(null===(a=p[0])||void 0===a?void 0:a.type)||"status").slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-32 truncate",children:e.shortName}),(0,s.jsx)("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-slate-600 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(e.percentage,"%"),backgroundColor:e.color}})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 w-8 text-right",children:e.count})]},t))})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:e.permits.slice(0,3).map(e=>(0,s.jsxs)("div",{onClick:()=>i(e),className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700 cursor-pointer hover:border-blue-300 dark:hover:border-blue-600 transition-colors",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-blue-600",children:e.requestNo}),(0,s.jsx)("span",{className:"text-xs text-gray-400 truncate flex-1",children:e.owner}),(0,s.jsx)("span",{className:"text-xs font-medium ".concat(e.remainingTime.startsWith("-")?"text-red-500":"text-green-500"),children:e.remainingTime.startsWith("-")?"⚠":"✓"})]},e.id))}),e.permits.length>3&&(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["+",e.permits.length-3," more permits"]})]})]},e.name)})}),"data"===m&&(0,s.jsx)(eX,{groupedData:N,permits:y,currentGroupDimension:u,onViewPermit:i,typeLabels:A})]})}function e0(e){let{mode:t}=e;return(0,s.jsx)(eY,{mode:t})}function e4(e){var t;let{mode:a}=e,{drillDown:l,getFilteredByDrillDown:d,navigateDrillDown:i,openPermitModal:n}=(0,g.useDashboard)(),[c,o]=(0,r.useState)("chart"),[x,m]=(0,r.useState)("bar"),h=d(),u=(0,r.useMemo)(()=>{let e=new Set(l.breadcrumb.map(e=>e.type).filter(Boolean));return ez.filter(t=>!e.has(t.type))},[l.breadcrumb]),[b,p]=(0,r.useState)((null===(t=u[0])||void 0===t?void 0:t.type)||null),y=(0,r.useMemo)(()=>{if(!b)return[];let e=e=>{switch(b){case"serviceType":return e.serviceType;case"status":return e.currentStatus;case"owner":return e.owner;case"zone":return e.zone;case"priority":return e.priority;default:return""}},t={};h.forEach(a=>{let s=e(a);t[s]||(t[s]=[]),t[s].push(a)});let a=h.length;return Object.entries(t).map((e,t)=>{let[s,r]=e;return{...eR(r,b,s),percentage:a>0?Math.round(r.length/a*100):0,color:"status"===b?k(s):"priority"===b?w(s):v.serviceTypes[t%v.serviceTypes.length]}}).sort((e,t)=>t.count-e.count)},[h,b]),j=e=>{b&&i(b,e)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Filtered to ",(0,s.jsxs)("span",{className:"font-bold",children:[h.length," permits"]})]})}),(0,s.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"text-green-600",children:[h.filter(e=>"Opened"===e.status).length," Active"]}),(0,s.jsxs)("span",{className:"text-gray-500",children:[h.filter(e=>"Closed"===e.status).length," Closed"]}),(0,s.jsxs)("span",{className:"text-red-600",children:[h.filter(e=>e.remainingTime.startsWith("-")).length," SLA Breached"]})]})]})}),(0,s.jsx)(eE,{permits:h}),(0,s.jsx)(eI,{permits:h}),u.length>0&&b&&(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Continue Analysis"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Select another dimension to analyze"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(eF,{viewMode:c,setViewMode:o}),"chart"===c&&(0,s.jsx)(eL,{chartType:x,setChartType:m})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:u.map(e=>(0,s.jsxs)("button",{onClick:()=>p(e.type),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(b===e.type?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border-2 border-blue-500":"bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-gray-400 border-2 border-transparent hover:border-gray-300"),children:[e.icon,(0,s.jsx)("span",{children:e.label})]},e.id))}),"chart"===c?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)(eW,{data:y,chartType:x,onItemClick:j,height:350})}),(0,s.jsx)("div",{className:"lg:col-span-2 space-y-2 max-h-[350px] overflow-y-auto",children:y.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>j(e.name),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors group border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"text-left min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:e.shortName}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.highPriorityCount," high priority"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:e.count}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]}),(0,s.jsx)(em.Z,{className:"w-4 h-4 text-gray-400 opacity-0 group-hover:opacity-100"})]})]},t))})]}):"groupBy"===a&&b?(0,s.jsx)(eK,{permits:h,groupBy:b,onViewDetails:n}):(0,s.jsx)(eq,{permits:h,onViewDetails:n})]}),0===u.length&&(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-card border border-gray-100 dark:border-slate-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"All Matching Permits"}),(0,s.jsx)(eq,{permits:h,onViewDetails:n})]})]})}function e1(){var e;let{drillDown:t}=(0,g.useDashboard)(),[a,l]=(0,r.useState)("filter");return(0,s.jsxs)("div",{className:"space-y-6",children:[0===t.level&&(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Data Analysis"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click any chart element to drill down - use each visual's options menu for mode"})]})}),0===t.level?(0,s.jsx)(eU,{mode:a}):(null===(e=t.value)||void 0===e?void 0:e.startsWith("_group_"))?(0,s.jsx)(e0,{mode:a}):(0,s.jsx)(e4,{mode:a})]})}function e5(e){let{title:t,value:a,icon:r,color:l,subtitle:d,trend:i,onClick:n,size:c="normal"}=e;return(0,s.jsx)("div",{onClick:n,className:f("relative overflow-hidden rounded-2xl bg-white dark:bg-slate-800 shadow-card hover:shadow-card-hover transition-all duration-300","border border-gray-100 dark:border-slate-700",n&&"cursor-pointer","large"===c?"p-6":"p-5"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t}),(0,s.jsx)("p",{className:f("font-bold text-gray-900 dark:text-white","large"===c?"text-3xl":"text-2xl"),children:"number"==typeof a?a.toLocaleString():a}),d&&(0,s.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:d}),i&&(0,s.jsxs)("div",{className:f("flex items-center mt-2 text-sm font-medium",i.isUp?"text-green-600":"text-red-600"),children:[(0,s.jsxs)("span",{children:[i.isUp?"↑":"↓"," ",Math.abs(i.value),"%"]}),(0,s.jsx)("span",{className:"text-gray-400 ml-1",children:"vs last week"})]})]}),(0,s.jsx)("div",{className:f("flex items-center justify-center rounded-xl","large"===c?"w-14 h-14":"w-12 h-12",l),children:r})]})})}function e2(){let{getFilteredByDrillDown:e,navigateDrillDown:t}=(0,h.useInspection)(),a=e(),l=(0,r.useMemo)(()=>{let e=a.filter(e=>"Completed"===e.status).length,t=a.filter(e=>"Pending"===e.status).length,s=a.filter(e=>"In Progress"===e.status).length,r=a.filter(e=>"Scheduled"===e.status).length,l=a.filter(e=>"Failed"===e.status).length,d=a.filter(e=>null!==e.complianceScore),i=d.length>0?Math.round(d.reduce((e,t)=>e+(t.complianceScore||0),0)/d.length):0,n=a.filter(e=>"Within SLA"===e.slaStatus).length,c=a.length>0?Math.round(n/a.length*100):0;return{total:a.length,completed:e,pending:t,inProgress:s,scheduled:r,failed:l,avgScore:i,slaCompliance:c}},[a]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(e5,{title:"Total Inspections",value:l.total,icon:(0,s.jsx)(d.Z,{className:"w-6 h-6 text-blue-600"}),color:"bg-blue-500/10",trend:{value:15,isUp:!0},size:"large"}),(0,s.jsx)(e5,{title:"Completed",value:l.completed,icon:(0,s.jsx)(el.Z,{className:"w-6 h-6 text-green-600"}),color:"bg-green-500/10",subtitle:"".concat(Math.round(l.completed/l.total*100)||0,"% completion rate"),onClick:()=>t("status","Completed"),size:"large"}),(0,s.jsx)(e5,{title:"Avg Compliance Score",value:"".concat(l.avgScore,"%"),icon:(0,s.jsx)(es.Z,{className:"w-6 h-6 text-purple-600"}),color:"bg-purple-500/10",subtitle:l.avgScore>=90?"Excellent":l.avgScore>=70?"Good":"Needs Improvement",size:"large"}),(0,s.jsx)(e5,{title:"SLA Compliance",value:"".concat(l.slaCompliance,"%"),icon:(0,s.jsx)($.Z,{className:"w-6 h-6 text-indigo-600"}),color:"bg-indigo-500/10",subtitle:l.slaCompliance>=95?"On Target":"Below Target",trend:{value:3,isUp:l.slaCompliance>=90},size:"large"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-5 gap-3",children:[(0,s.jsx)(e5,{title:"Pending",value:l.pending,icon:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-amber-600"}),color:"bg-amber-500/10",onClick:()=>t("status","Pending")}),(0,s.jsx)(e5,{title:"In Progress",value:l.inProgress,icon:(0,s.jsx)(p.Z,{className:"w-5 h-5 text-blue-600"}),color:"bg-blue-500/10",onClick:()=>t("status","In Progress")}),(0,s.jsx)(e5,{title:"Scheduled",value:l.scheduled,icon:(0,s.jsx)(V.Z,{className:"w-5 h-5 text-cyan-600"}),color:"bg-cyan-500/10",onClick:()=>t("status","Scheduled")}),(0,s.jsx)(e5,{title:"Failed",value:l.failed,icon:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-red-600"}),color:"bg-red-500/10",onClick:()=>t("status","Failed")}),(0,s.jsx)(e5,{title:"Reinspections",value:a.filter(e=>e.reinspectionRequired).length,icon:(0,s.jsx)(E.Z,{className:"w-5 h-5 text-orange-600"}),color:"bg-orange-500/10"})]})]})}var e3=a(28670);function e6(e){let{isVertical:t=!1}=e,{filters:a,updateFilter:l,resetFilters:d,lookups:i}=(0,h.useInspection)(),[n,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)({inspectionType:!0,status:!0,inspector:!0,zone:!0,priority:!0,category:!1,slaStatus:!1}),m=e=>{x(t=>({...t,[e]:!t[e]}))},g=a.inspectionType||a.status||a.inspector||a.zone||a.priority||a.category||a.slaStatus||a.searchQuery,u=[a.inspectionType,a.status,a.inspector,a.zone,a.priority,a.category,a.slaStatus,a.searchQuery].filter(Boolean).length;return t?(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-slate-800 dark:to-slate-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",children:(0,s.jsx)(A.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:"Filters"}),u>0&&(0,s.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:[u," active"]})]})]}),u>0&&(0,s.jsxs)("button",{onClick:d,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",children:[(0,s.jsx)(B.Z,{className:"w-3 h-3"}),"Reset"]})]})}),(0,s.jsx)("div",{className:"p-3 border-b border-gray-100 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(e3.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:a.searchQuery,onChange:e=>l("searchQuery",e.target.value),className:"w-full pl-9 pr-3 py-2 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-xs focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"})]})}),(0,s.jsxs)("div",{className:"divide-y divide-gray-100 dark:divide-slate-700 max-h-[calc(100vh-300px)] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("inspectionType"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.inspectionType?"text-emerald-600 dark:text-emerald-400":"",children:["Inspection Type ",a.inspectionType&&"•"]}),o.inspectionType?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.inspectionType&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("inspectionType",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.inspectionType?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Types"}),i.inspectionTypes.map(e=>(0,s.jsx)("button",{onClick:()=>l("inspectionType",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.inspectionType===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("status"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.status?"text-emerald-600 dark:text-emerald-400":"",children:["Status ",a.status&&"•"]}),o.status?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.status&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("status",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.status?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Statuses"}),i.statuses.map(e=>(0,s.jsxs)("button",{onClick:()=>l("status",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all flex items-center gap-2",a.status===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)("span",{className:f("w-2 h-2 rounded-full","Scheduled"===e&&"bg-blue-500","In Progress"===e&&"bg-yellow-500","Completed"===e&&"bg-green-500","Failed"===e&&"bg-red-500","Cancelled"===e&&"bg-gray-500")}),e]},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("inspector"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.inspector?"text-emerald-600 dark:text-emerald-400":"",children:["Inspector ",a.inspector&&"•"]}),o.inspector?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.inspector&&(0,s.jsxs)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:[(0,s.jsx)("button",{onClick:()=>l("inspector",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.inspector?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Inspectors"}),i.inspectors.map(e=>(0,s.jsx)("button",{onClick:()=>l("inspector",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all truncate",a.inspector===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),title:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("zone"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.zone?"text-emerald-600 dark:text-emerald-400":"",children:["Zone ",a.zone&&"•"]}),o.zone?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.zone&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("zone",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.zone?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Zones"}),i.zones.map(e=>(0,s.jsx)("button",{onClick:()=>l("zone",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.zone===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("priority"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.priority?"text-emerald-600 dark:text-emerald-400":"",children:["Priority ",a.priority&&"•"]}),o.priority?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.priority&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("priority",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.priority?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Priorities"}),i.priorities.map(e=>(0,s.jsxs)("button",{onClick:()=>l("priority",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all flex items-center gap-2",a.priority===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)("span",{className:f("w-2 h-2 rounded-full","High"===e&&"bg-red-500","Medium"===e&&"bg-yellow-500","Low"===e&&"bg-green-500")}),e]},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("category"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.category?"text-emerald-600 dark:text-emerald-400":"",children:["Category ",a.category&&"•"]}),o.category?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.category&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("category",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.category?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All Categories"}),i.categories.map(e=>(0,s.jsx)("button",{onClick:()=>l("category",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.category===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e},e))]})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsxs)("button",{onClick:()=>m("slaStatus"),className:"w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,s.jsxs)("span",{className:a.slaStatus?"text-emerald-600 dark:text-emerald-400":"",children:["SLA Status ",a.slaStatus&&"•"]}),o.slaStatus?(0,s.jsx)(z.Z,{className:"w-3 h-3"}):(0,s.jsx)(D.Z,{className:"w-3 h-3"})]}),o.slaStatus&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("button",{onClick:()=>l("slaStatus",""),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all",a.slaStatus?"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium"),children:"All SLA"}),["On Track","At Risk","Breached"].map(e=>(0,s.jsxs)("button",{onClick:()=>l("slaStatus",e),className:f("w-full text-left px-3 py-1.5 rounded-lg text-xs transition-all flex items-center gap-2",a.slaStatus===e?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)("span",{className:f("w-2 h-2 rounded-full","On Track"===e&&"bg-green-500","At Risk"===e&&"bg-yellow-500","Breached"===e&&"bg-red-500")}),e]},e))]})]})]})]}):(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-card border border-gray-100 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(e3.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Search inspections, locations, inspectors...",value:a.searchQuery,onChange:e=>l("searchQuery",e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("select",{value:a.status,onChange:e=>l("status",e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),i.statuses.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:a.priority,onChange:e=>l("priority",e.target.value),className:"px-4 py-2.5 bg-gray-50 dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Priorities"}),i.priorities.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("button",{onClick:()=>c(!n),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors ".concat(n?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-50 dark:bg-slate-700 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-600"),children:[(0,s.jsx)(A.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"More Filters"})]}),g&&(0,s.jsxs)("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl text-sm font-medium hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:[(0,s.jsx)(B.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Reset"})]})]})]})}),n&&(0,s.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-slate-700/50 grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Inspection Type"}),(0,s.jsxs)("select",{value:a.inspectionType,onChange:e=>l("inspectionType",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),i.inspectionTypes.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Inspector"}),(0,s.jsxs)("select",{value:a.inspector,onChange:e=>l("inspector",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Inspectors"}),i.inspectors.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Zone"}),(0,s.jsxs)("select",{value:a.zone,onChange:e=>l("zone",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Zones"}),i.zones.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:a.category,onChange:e=>l("category",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),i.categories.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"SLA Status"}),(0,s.jsxs)("select",{value:a.slaStatus,onChange:e=>l("slaStatus",e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All SLA"}),(0,s.jsx)("option",{value:"On Track",children:"On Track"}),(0,s.jsx)("option",{value:"At Risk",children:"At Risk"}),(0,s.jsx)("option",{value:"Breached",children:"Breached"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Reinspection"}),(0,s.jsxs)("select",{value:null===a.reinspectionRequired?"":a.reinspectionRequired?"yes":"no",onChange:e=>l("reinspectionRequired",""===e.target.value?null:"yes"===e.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All"}),(0,s.jsx)("option",{value:"yes",children:"Required"}),(0,s.jsx)("option",{value:"no",children:"Not Required"})]})]})]}),g&&(0,s.jsxs)("div",{className:"px-4 py-3 flex flex-wrap gap-2 border-t border-gray-100 dark:border-slate-700",children:[a.searchQuery&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-xs font-medium",children:['Search: "',a.searchQuery,'"',(0,s.jsx)("button",{onClick:()=>l("searchQuery",""),className:"hover:text-blue-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.inspectionType&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-violet-100 dark:bg-violet-900/30 text-violet-700 dark:text-violet-400 rounded-full text-xs font-medium",children:["Type: ",a.inspectionType,(0,s.jsx)("button",{onClick:()=>l("inspectionType",""),className:"hover:text-violet-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.status&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs font-medium",children:["Status: ",a.status,(0,s.jsx)("button",{onClick:()=>l("status",""),className:"hover:text-green-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.inspector&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded-full text-xs font-medium",children:["Inspector: ",a.inspector,(0,s.jsx)("button",{onClick:()=>l("inspector",""),className:"hover:text-amber-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.zone&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400 rounded-full text-xs font-medium",children:["Zone: ",a.zone,(0,s.jsx)("button",{onClick:()=>l("zone",""),className:"hover:text-cyan-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.priority&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-full text-xs font-medium",children:["Priority: ",a.priority,(0,s.jsx)("button",{onClick:()=>l("priority",""),className:"hover:text-red-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.category&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-full text-xs font-medium",children:["Category: ",a.category,(0,s.jsx)("button",{onClick:()=>l("category",""),className:"hover:text-indigo-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]}),a.slaStatus&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-pink-100 dark:bg-pink-900/30 text-pink-700 dark:text-pink-400 rounded-full text-xs font-medium",children:["SLA: ",a.slaStatus,(0,s.jsx)("button",{onClick:()=>l("slaStatus",""),className:"hover:text-pink-900",children:(0,s.jsx)(_.Z,{className:"w-3 h-3"})})]})]})]})}function e7(){let{drillDown:e,goBackDrillDown:t,resetDrillDown:a}=(0,h.useInspection)();if(0===e.level)return null;let r={inspectionType:"Type",status:"Status",inspector:"Inspector",zone:"Zone",priority:"Priority",category:"Category"},l=e=>e.startsWith("_group_")?"All "+r[e.replace("_group_","")]+"s":e;return(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white dark:bg-slate-800 rounded-xl px-4 py-3 shadow-sm border border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-1 flex-wrap",children:[(0,s.jsxs)("button",{onClick:a,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:[(0,s.jsx)(I.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Inspections"})]}),e.breadcrumb.map((a,d)=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(O.Z,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("button",{onClick:()=>{let a=e.breadcrumb.length-d;for(let e=0;e<a;e++)t()},className:"px-2.5 py-1.5 text-sm rounded-lg transition-colors ".concat(d===e.breadcrumb.length-1?"font-semibold text-gray-900 dark:text-white bg-gray-100 dark:bg-slate-700":"font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-slate-700"),children:[a.type&&(0,s.jsxs)("span",{className:"text-gray-400 dark:text-gray-500 mr-1",children:[r[a.type],":"]}),a.value?l(a.value):"Overview"]})]},d))]}),(0,s.jsxs)("button",{onClick:a,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:[(0,s.jsx)(B.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Reset"})]})]})}var e9=a(63195),e8=a(99925);let te={status:{Completed:"#22C55E",Pending:"#F59E0B","In Progress":"#3B82F6",Scheduled:"#8B5CF6",Failed:"#EF4444",Cancelled:"#6B7280"},priority:{High:"#EF4444",Medium:"#F59E0B",Low:"#22C55E"},sla:{"Within SLA":"#22C55E","SLA Breached":"#EF4444","N/A":"#9CA3AF"},category:["#3B82F6","#8B5CF6","#06B6D4","#F59E0B","#EF4444","#22C55E","#EC4899","#6366F1","#14B8A6","#F97316"]},tt=[{id:"pie",label:"Pie",icon:(0,s.jsx)(J.Z,{className:"w-4 h-4"})},{id:"bar",label:"Bar",icon:(0,s.jsx)(P.Z,{className:"w-4 h-4"})},{id:"horizontalBar",label:"H-Bar",icon:(0,s.jsx)(X.Z,{className:"w-4 h-4 rotate-90"})},{id:"line",label:"Line",icon:(0,s.jsx)(Y.Z,{className:"w-4 h-4"})},{id:"area",label:"Area",icon:(0,s.jsx)(ee.Z,{className:"w-4 h-4"})},{id:"radial",label:"Radial",icon:(0,s.jsx)(et.Z,{className:"w-4 h-4"})}],ta=[{id:"inspectionType",label:"By Type",description:"Analyze by inspection type",icon:(0,s.jsx)(d.Z,{className:"w-5 h-5"}),type:"inspectionType"},{id:"status",label:"By Status",description:"View status distribution",icon:(0,s.jsx)($.Z,{className:"w-5 h-5"}),type:"status"},{id:"inspector",label:"By Inspector",description:"Workload distribution",icon:(0,s.jsx)(L.Z,{className:"w-5 h-5"}),type:"inspector"},{id:"zone",label:"By Zone",description:"Geographic analysis",icon:(0,s.jsx)(F.Z,{className:"w-5 h-5"}),type:"zone"},{id:"priority",label:"By Priority",description:"Priority breakdown",icon:(0,s.jsx)(E.Z,{className:"w-5 h-5"}),type:"priority"},{id:"category",label:"By Category",description:"Category analysis",icon:(0,s.jsx)(ex.Z,{className:"w-5 h-5"}),type:"category"}];function ts(e){return te.status[e]||"#6B7280"}function tr(e){return te.priority[e]||"#6B7280"}function tl(e){return te.sla[e]||"#9CA3AF"}function td(e){let t=e.length,a=e.filter(e=>"Within SLA"===e.slaStatus).length,s=e.filter(e=>"SLA Breached"===e.slaStatus).length;return{total:t,withinSLA:a,breached:s,compliance:t>0?Math.round(a/t*100):0,breachRate:t>0?Math.round(s/t*100):0}}function ti(e){let t=e.filter(e=>"Completed"===e.status),a=t.filter(e=>null!==e.complianceScore),s=t.filter(e=>null!==e.duration),r=a.length>0?Math.round(a.reduce((e,t)=>e+(t.complianceScore||0),0)/a.length):0,l=s.length>0?Math.round(s.reduce((e,t)=>e+(t.duration||0),0)/s.length):0;return{completionRate:e.length>0?Math.round(t.length/e.length*100):0,avgScore:r,avgDuration:l,failedCount:e.filter(e=>"Failed"===e.status).length,highPriorityPending:e.filter(e=>"High"===e.priority&&["Pending","Scheduled"].includes(e.status)).length}}function tn(e){let{data:t,chartType:a,height:r=200,onItemClick:l}=e;if(!t||0===t.length)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No data"});switch(a){case"pie":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(eu.u,{children:[(0,s.jsx)(eb.b,{data:t,cx:"50%",cy:"50%",innerRadius:r>150?40:25,outerRadius:r>150?70:45,paddingAngle:2,dataKey:"count",onClick:l,className:l?"cursor-pointer":"",children:t.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.color,stroke:"white",strokeWidth:2},t))}),(0,s.jsx)(ey.u,{formatter:e=>[e,"Count"],contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}})]})});case"bar":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(ej.v,{data:t,children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,s.jsx)(ef.K,{dataKey:"shortName",tick:{fontSize:11}}),(0,s.jsx)(ev.B,{tick:{fontSize:11}}),(0,s.jsx)(ey.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),(0,s.jsx)(ek.$,{dataKey:"count",radius:[4,4,0,0],onClick:l,className:l?"cursor-pointer":"",children:t.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.color},t))})]})});case"horizontalBar":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(ej.v,{data:t,layout:"vertical",children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,s.jsx)(ef.K,{type:"number",tick:{fontSize:11}}),(0,s.jsx)(ev.B,{type:"category",dataKey:"shortName",width:80,tick:{fontSize:10}}),(0,s.jsx)(ey.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),(0,s.jsx)(ek.$,{dataKey:"count",radius:[0,4,4,0],onClick:l,className:l?"cursor-pointer":"",children:t.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.color},t))})]})});case"line":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(ew.w,{data:t,children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,s.jsx)(ef.K,{dataKey:"shortName",tick:{fontSize:11}}),(0,s.jsx)(ev.B,{tick:{fontSize:11}}),(0,s.jsx)(ey.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),(0,s.jsx)(eC.x,{type:"monotone",dataKey:"count",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:4}})]})});case"area":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(eS.T,{data:t,children:[(0,s.jsx)(eN.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,s.jsx)(ef.K,{dataKey:"shortName",tick:{fontSize:11}}),(0,s.jsx)(ev.B,{tick:{fontSize:11}}),(0,s.jsx)(ey.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}}),(0,s.jsx)(eZ.u,{type:"monotone",dataKey:"count",stroke:"#10B981",fill:"#10B981",fillOpacity:.3})]})});case"radial":return(0,s.jsx)(eh.h,{width:"100%",height:r,children:(0,s.jsxs)(eT.B,{cx:"50%",cy:"50%",innerRadius:"30%",outerRadius:"90%",data:t,startAngle:180,endAngle:0,children:[(0,s.jsx)(eA.G,{dataKey:"count",cornerRadius:4,label:{fill:"#666",fontSize:10},children:t.map((e,t)=>(0,s.jsx)(ep.b,{fill:e.color},t))}),(0,s.jsx)(ey.u,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}})]})});default:return null}}function tc(e){let{value:t,size:a="normal"}=e,r="small"===a?{w:80,h:80,inner:25,outer:35}:"large"===a?{w:160,h:160,inner:50,outer:70}:{w:120,h:120,inner:35,outer:50},l=[{name:"SLA",value:t,fill:t>=90?"#22C55E":t>=70?"#F59E0B":"#EF4444"}];return(0,s.jsxs)("div",{className:"relative",style:{width:r.w,height:r.h},children:[(0,s.jsx)(eh.h,{width:"100%",height:"100%",children:(0,s.jsx)(eT.B,{cx:"50%",cy:"50%",innerRadius:r.inner,outerRadius:r.outer,data:l,startAngle:180,endAngle:0,children:(0,s.jsx)(eA.G,{dataKey:"value",cornerRadius:8,background:{fill:"#e5e7eb"}})})}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"font-bold ".concat("small"===a?"text-lg":"large"===a?"text-3xl":"text-xl"," ").concat(t>=90?"text-green-600":t>=70?"text-amber-600":"text-red-600"),children:[t,"%"]})})]})}function to(){var e;let{filteredInspections:t,navigateDrillDown:a,openInspectionModal:l}=(0,h.useInspection)(),[d,i]=(0,r.useState)("status"),[n,c]=(0,r.useState)("pie"),o=(0,r.useMemo)(()=>td(t),[t]),x=(0,r.useMemo)(()=>ti(t),[t]),m=(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.status]=(e[t.status]||0)+1}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,shortName:t,count:a,color:ts(t)}}).sort((e,t)=>t.count-e.count)},[t]),g=[{id:"status",label:"Status",data:m},{id:"sla",label:"SLA",data:(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.slaStatus]=(e[t.slaStatus]||0)+1}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,shortName:t.replace("SLA ",""),count:a,color:tl(t)}}).sort((e,t)=>t.count-e.count)},[t])},{id:"priority",label:"Priority",data:(0,r.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.priority]=(e[t.priority]||0)+1}),Object.entries(e).map(e=>{let[t,a]=e;return{name:t,shortName:t,count:a,color:tr(t)}}).sort((e,t)=>{let a={High:0,Medium:1,Low:2};return(a[e.name]||3)-(a[t.name]||3)})},[t])}],u=(null===(e=g.find(e=>e.id===d))||void 0===e?void 0:e.data)||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"SLA & Performance Overview"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.length," inspections • Real-time metrics"]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-12 md:col-span-3 flex flex-col items-center justify-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"SLA Compliance"}),(0,s.jsx)(tc,{value:o.compliance,size:"large"}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Within: ",o.withinSLA]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Breached: ",o.breached]})]})]})]}),(0,s.jsx)("div",{className:"col-span-12 md:col-span-5",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(el.Z,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"text-xs text-green-700 dark:text-green-400",children:"Completion Rate"})]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:[x.completionRate,"%"]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(es.Z,{className:"w-4 h-4 text-purple-600"}),(0,s.jsx)("span",{className:"text-xs text-purple-700 dark:text-purple-400",children:"Avg Score"})]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:[x.avgScore,"%"]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-xs text-blue-700 dark:text-blue-400",children:"Avg Duration"})]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[x.avgDuration," min"]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(E.Z,{className:"w-4 h-4 text-red-600"}),(0,s.jsx)("span",{className:"text-xs text-red-700 dark:text-red-400",children:"High Priority Pending"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:x.highPriorityPending})]})]})}),(0,s.jsxs)("div",{className:"col-span-12 md:col-span-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Status Overview"}),(0,s.jsx)("div",{className:"h-[140px]",children:(0,s.jsx)(tn,{data:m,chartType:"horizontalBar",height:140})})]})]})]}),(0,s.jsx)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-slate-900/50 border-t border-gray-200 dark:border-slate-700",children:(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3",children:m.map(e=>(0,s.jsxs)("button",{onClick:()=>a("status",e.name),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.name}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white ml-auto",children:e.count})]},e.name))})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,s.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Distribution Analysis"}),(0,s.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-slate-700 rounded-lg",children:g.map(e=>(0,s.jsx)("button",{onClick:()=>i(e.id),className:"px-3 py-1.5 rounded-md text-xs font-medium transition-all ".concat(d===e.id?"bg-white dark:bg-slate-600 text-emerald-600 dark:text-emerald-400 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400"),children:e.label},e.id))})]}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:tt.slice(0,4).map(e=>(0,s.jsx)("button",{onClick:()=>c(e.id),className:"p-2 rounded-lg transition-all ".concat(n===e.id?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e.icon},e.id))})]}),(0,s.jsx)("div",{className:"h-[300px]",children:(0,s.jsx)(tn,{data:u,chartType:n,height:300,onItemClick:e=>{let t={status:"status",sla:"status",priority:"priority"}[d];t&&a(t,e.name)}})}),(0,s.jsx)("div",{className:"mt-4 flex flex-wrap gap-3",children:u.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>{let t={status:"status",sla:"status",priority:"priority"}[d];t&&a(t,e.name)},className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 dark:bg-slate-700 hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:e.shortName}),(0,s.jsx)("span",{className:"text-xs font-semibold text-gray-900 dark:text-white",children:e.count})]},t))})]})}),(0,s.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 p-6 h-full",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Analyze By"}),(0,s.jsx)("div",{className:"space-y-2",children:ta.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.type,"_group_".concat(e.type)),className:"w-full flex items-center gap-3 p-3 rounded-xl border border-gray-100 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all group text-left",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 group-hover:bg-emerald-500 group-hover:text-white transition-colors",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]}),(0,s.jsx)(em.Z,{className:"w-4 h-4 text-gray-400 group-hover:text-emerald-500 transition-colors"})]},e.id))})]})})]})]})}function tx(){let{drillDown:e,navigateDrillDown:t,getFilteredByDrillDown:a,openInspectionModal:l}=(0,h.useInspection)(),[d,i]=(0,r.useState)("cards"),[n,c]=(0,r.useState)("pie"),[o,x]=(0,r.useState)(new Set),[m,g]=(0,r.useState)("count"),[u,b]=(0,r.useState)(0),p=e.type,y=a(),j=(0,r.useMemo)(()=>{let e=e=>{switch(p){case"inspectionType":return e.inspectionType;case"status":return e.status;case"inspector":return e.inspector;case"zone":return e.zone;case"priority":return e.priority;case"category":return e.category;default:return""}},t={};return y.forEach(a=>{let s=e(a);t[s]||(t[s]=[]),t[s].push(a)}),Object.entries(t).map((e,t)=>{let[a,s]=e,r=td(s),l=ti(s);return{name:a,shortName:a.length>15?a.substring(0,15)+"...":a,count:s.length,items:s,percentage:Math.round(s.length/y.length*100),color:"status"===p?ts(a):"priority"===p?tr(a):te.category[t%te.category.length],slaCompliance:r.compliance,avgScore:l.avgScore,completionRate:l.completionRate}}).sort((e,t)=>"count"===m?t.count-e.count:"name"===m?e.name.localeCompare(t.name):t.slaCompliance-e.slaCompliance)},[y,p,m]),N=e=>{x(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},f={inspectionType:"Inspection Type",status:"Status",inspector:"Inspector",zone:"Zone",priority:"Priority",category:"Category"},v=[{id:"tree",label:"Tree",icon:(0,s.jsx)(eg.Z,{className:"w-4 h-4"})},{id:"treemap",label:"Treemap",icon:(0,s.jsx)(e9.Z,{className:"w-4 h-4"})},{id:"cards",label:"Cards",icon:(0,s.jsx)(ea.Z,{className:"w-4 h-4"})},{id:"list",label:"List",icon:(0,s.jsx)(e8.Z,{className:"w-4 h-4"})},{id:"data",label:"Data",icon:(0,s.jsx)(eo.Z,{className:"w-4 h-4"})}],k=(0,r.useMemo)(()=>{let e=j.reduce((e,t)=>e+t.count,0),t=0;return j.map(a=>{let s=Math.max(a.count/e*100,5),r={...a,x:t,width:s};return t+=s,r})},[j]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-4 border border-emerald-200 dark:border-emerald-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("p",{className:"text-emerald-800 dark:text-emerald-200",children:[(0,s.jsx)("span",{className:"font-semibold",children:y.length})," inspections in ",(0,s.jsx)("span",{className:"font-semibold",children:j.length})," groups"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-emerald-600 dark:text-emerald-400",children:"Avg SLA:"}),(0,s.jsxs)("span",{className:"font-semibold text-emerald-800 dark:text-emerald-200",children:[Math.round(j.reduce((e,t)=>e+t.slaCompliance,0)/j.length||0),"%"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sort:"}),(0,s.jsxs)("select",{value:m,onChange:e=>g(e.target.value),className:"text-xs border border-gray-200 dark:border-slate-600 rounded-lg px-2 py-1 bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300",children:[(0,s.jsx)("option",{value:"count",children:"Count"}),(0,s.jsx)("option",{value:"name",children:"Name"}),(0,s.jsx)("option",{value:"sla",children:"SLA %"})]})]})]})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-gray-200 dark:border-slate-700 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-slate-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["By ",f[p||"inspectionType"]]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click any group to drill deeper"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-slate-700 rounded-lg",children:v.map(e=>(0,s.jsx)("button",{onClick:()=>i(e.id),title:e.label,className:"p-2 rounded-md transition-all ".concat(d===e.id?"bg-white dark:bg-slate-600 text-emerald-600 shadow-sm":"text-gray-400 hover:text-gray-600"),children:e.icon},e.id))}),("cards"===d||"list"===d)&&(0,s.jsx)("div",{className:"flex items-center gap-1 ml-2",children:tt.slice(0,3).map(e=>(0,s.jsx)("button",{onClick:()=>c(e.id),className:"p-2 rounded-lg transition-all ".concat(n===e.id?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100 dark:hover:bg-slate-700"),children:e.icon},e.id))})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:["tree"===d&&(0,s.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,s.jsxs)("div",{className:"border border-gray-100 dark:border-slate-700 rounded-xl overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>N(e.name),className:"w-full flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[o.has(e.name)?(0,s.jsx)(D.Z,{className:"w-5 h-5 text-gray-400"}):(0,s.jsx)(z.Z,{className:"w-5 h-5 text-gray-400 rotate-180"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white flex-1 text-left",children:e.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.count," inspections"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,s.jsx)("div",{className:"w-20 h-2 bg-gray-200 dark:bg-slate-600 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(e.slaCompliance,"%"),backgroundColor:tl(e.slaCompliance>=80?"Within SLA":"SLA Breached")}})}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-10",children:[e.slaCompliance,"%"]})]}),(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),t(p,e.name)},className:"p-2 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-gray-400 hover:text-emerald-600",children:(0,s.jsx)(em.Z,{className:"w-4 h-4"})})]}),o.has(e.name)&&(0,s.jsx)("div",{className:"px-4 pb-4",children:(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded-lg overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("th",{className:"text-left p-3 font-medium text-gray-500 dark:text-gray-400",children:"ID"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-gray-500 dark:text-gray-400",children:"Type"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-gray-500 dark:text-gray-400",children:"SLA"}),(0,s.jsx)("th",{className:"text-left p-3 font-medium text-gray-500 dark:text-gray-400",children:"Inspector"}),(0,s.jsx)("th",{className:"text-right p-3 font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.items.slice(0,5).map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 dark:border-slate-800 last:border-0",children:[(0,s.jsx)("td",{className:"p-3 font-mono text-gray-900 dark:text-white",children:e.id}),(0,s.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.inspectionType}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:"".concat(ts(e.status),"20"),color:ts(e.status)},children:e.status})}),(0,s.jsx)("td",{className:"p-3",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Within SLA"===e.slaStatus?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"SLA Breached"===e.slaStatus?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-slate-700 dark:text-gray-400"),children:e.slaStatus})}),(0,s.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.inspector}),(0,s.jsx)("td",{className:"p-3 text-right",children:(0,s.jsx)("button",{onClick:()=>l(e),className:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 text-xs font-medium",children:"View"})})]},e.id))})]}),e.items.length>5&&(0,s.jsxs)("p",{className:"text-center text-xs text-gray-500 dark:text-gray-400 py-2",children:["+",e.items.length-5," more"]})]})})]},e.name))}),"treemap"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex h-32 gap-1 rounded-xl overflow-hidden",children:k.map(e=>(0,s.jsx)("button",{onClick:()=>t(p,e.name),style:{width:"".concat(e.width,"%"),backgroundColor:e.color},className:"relative group transition-all hover:opacity-90 hover:scale-[1.02] hover:z-10",children:(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-2 text-white",children:[(0,s.jsx)("span",{className:"font-semibold text-sm drop-shadow-md text-center leading-tight",children:e.shortName}),(0,s.jsx)("span",{className:"text-xs opacity-90",children:e.count}),(0,s.jsxs)("span",{className:"text-xs opacity-75",children:[e.percentage,"%"]})]})},e.name))}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:j.map(e=>(0,s.jsxs)("button",{onClick:()=>t(p,e.name),className:"flex items-center gap-3 p-3 rounded-xl border border-gray-100 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all text-left",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.count," • SLA ",e.slaCompliance,"%"]})]})]},e.name))})]}),"cards"===d&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:j.map(e=>(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-900/50 rounded-xl border border-gray-100 dark:border-slate-700 overflow-hidden hover:border-emerald-300 dark:hover:border-emerald-600 transition-colors",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]}),(0,s.jsx)("button",{onClick:()=>t(p,e.name),className:"p-1.5 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-gray-400 hover:text-emerald-600",children:(0,s.jsx)(em.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[e.count," inspections"]}),(0,s.jsx)("span",{className:"text-gray-400",children:"•"}),(0,s.jsxs)("span",{className:e.slaCompliance>=80?"text-green-600":e.slaCompliance>=50?"text-yellow-600":"text-red-600",children:["SLA ",e.slaCompliance,"%"]})]})]}),(0,s.jsx)("div",{className:"h-32 p-2",children:(0,s.jsx)(tn,{data:[{name:"SLA",count:e.slaCompliance,color:tl(e.slaCompliance>=80?"Within SLA":"SLA Breached")},{name:"Gap",count:100-e.slaCompliance,color:"#e5e7eb"}],chartType:n,height:112})})]},e.name))}),"list"===d&&(0,s.jsx)("div",{className:"space-y-3",children:j.map(e=>(0,s.jsxs)("button",{onClick:()=>t(p,e.name),className:"w-full flex items-center gap-4 p-4 rounded-xl border border-gray-100 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-all",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.count," inspections • ",e.percentage,"%"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.slaCompliance,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"SLA"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e.avgScore,"%"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Avg Score"})]}),(0,s.jsx)("div",{className:"w-32 h-8",children:(0,s.jsx)(tn,{data:[{name:e.name,count:e.count,color:e.color}],chartType:"horizontalBar",height:32})})]}),(0,s.jsx)(em.Z,{className:"w-5 h-5 text-gray-400"})]},e.name))}),"data"===d&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:f[p||"inspectionType"]}),(0,s.jsx)("th",{className:"text-right p-4 font-semibold text-gray-900 dark:text-white",children:"Count"}),(0,s.jsx)("th",{className:"text-right p-4 font-semibold text-gray-900 dark:text-white",children:"%"}),(0,s.jsx)("th",{className:"text-right p-4 font-semibold text-gray-900 dark:text-white",children:"SLA %"}),(0,s.jsx)("th",{className:"text-right p-4 font-semibold text-gray-900 dark:text-white",children:"Avg Score"}),(0,s.jsx)("th",{className:"text-right p-4 font-semibold text-gray-900 dark:text-white",children:"Completion"}),(0,s.jsx)("th",{className:"p-4"})]})}),(0,s.jsx)("tbody",{children:j.slice(10*u,(u+1)*10).map((e,a)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700/50 ".concat(a%2==0?"":"bg-gray-50/50 dark:bg-slate-900/30"),children:[(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name})]})}),(0,s.jsx)("td",{className:"p-4 text-right text-gray-600 dark:text-gray-400",children:e.count}),(0,s.jsxs)("td",{className:"p-4 text-right text-gray-600 dark:text-gray-400",children:[e.percentage,"%"]}),(0,s.jsx)("td",{className:"p-4 text-right",children:(0,s.jsxs)("span",{className:e.slaCompliance>=80?"text-green-600":e.slaCompliance>=50?"text-yellow-600":"text-red-600",children:[e.slaCompliance,"%"]})}),(0,s.jsxs)("td",{className:"p-4 text-right text-gray-600 dark:text-gray-400",children:[e.avgScore,"%"]}),(0,s.jsxs)("td",{className:"p-4 text-right text-gray-600 dark:text-gray-400",children:[e.completionRate,"%"]}),(0,s.jsx)("td",{className:"p-4 text-right",children:(0,s.jsx)("button",{onClick:()=>t(p,e.name),className:"p-2 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 text-gray-400 hover:text-emerald-600",children:(0,s.jsx)(em.Z,{className:"w-4 h-4"})})})]},e.name))})]})}),j.length>10&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-slate-700",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",10*u+1," to ",Math.min((u+1)*10,j.length)," of ",j.length]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{disabled:0===u,onClick:()=>b(e=>e-1),className:"px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-slate-600 disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-slate-700",children:"Previous"}),(0,s.jsx)("button",{disabled:(u+1)*10>=j.length,onClick:()=>b(e=>e+1),className:"px-3 py-1.5 text-sm rounded-lg border border-gray-200 dark:border-slate-600 disabled:opacity-50 hover:bg-gray-50 dark:hover:bg-slate-700",children:"Next"})]})]})]})]})]})]})}function tm(){let{drillDown:e}=(0,h.useInspection)();return 0===e.level?(0,s.jsx)(to,{}):(0,s.jsx)(tx,{})}var tg=a(59496),th=a(83368);function tu(){var e;let{selectedInspection:t,closeInspectionModal:a}=(0,h.useInspection)();return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:a}),(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-3xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden transform transition-all",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-5 text-white",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6"}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:t.inspectionNo})]}),(0,s.jsx)("p",{className:"text-blue-100 text-sm",children:t.inspectionType})]}),(0,s.jsx)("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,s.jsx)(_.Z,{className:"w-5 h-5"})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsx)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat((e=>{let t={Completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",Pending:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400","In Progress":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",Scheduled:"bg-violet-100 text-violet-800 dark:bg-violet-900/30 dark:text-violet-400",Failed:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",Cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};return t[e]||t.Pending})(t.status)),children:t.status}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat((e=>{let t={High:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",Medium:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",Low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"};return t[e]||t.Medium})(t.priority)),children:[(0,s.jsx)(E.Z,{className:"w-3.5 h-3.5"}),t.priority," Priority"]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ".concat((e=>{let t={"On Track":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400","At Risk":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",Breached:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"};return t[e]||t["On Track"]})(t.slaStatus)),children:[(0,s.jsx)(p.Z,{className:"w-3.5 h-3.5"}),"SLA: ",t.slaStatus]}),t.reinspectionRequired&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",children:[(0,s.jsx)(c.Z,{className:"w-3.5 h-3.5"}),"Reinspection Required"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-4 text-center",children:[(0,s.jsx)(tg.Z,{className:"w-6 h-6 mx-auto mb-2 ".concat(null===(e=t.complianceScore)?"text-gray-400":e>=90?"text-green-500":e>=70?"text-amber-500":"text-red-500")}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:null!==t.complianceScore?"".concat(t.complianceScore,"%"):"N/A"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Compliance Score"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-4 text-center",children:[(0,s.jsx)(p.Z,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:null!==t.duration?"".concat(t.duration,"m"):"N/A"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Duration"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-4 text-center",children:[(0,s.jsx)(th.Z,{className:"w-6 h-6 mx-auto mb-2 text-violet-500"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:t.category}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Category"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-slate-700/50 rounded-xl p-4 text-center",children:[(0,s.jsx)(F.Z,{className:"w-6 h-6 mx-auto mb-2 text-emerald-500"}),(0,s.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t.zone}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Zone"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Inspection Details"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(F.Z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Location"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.location})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(H.Z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inspector"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.inspector})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(H.Z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Created By"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.createdBy})]})]}),t.relatedPermitNo&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Related Permit"}),(0,s.jsx)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:t.relatedPermitNo})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Schedule"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(V.Z,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Scheduled Date"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C(t.scheduledDate)})]})]}),t.completedDate&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(V.Z,{className:"w-5 h-5 text-green-500 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed Date"}),(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C(t.completedDate)})]})]})]})]})]}),t.findings&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Findings"}),(0,s.jsx)("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-100 dark:border-amber-800",children:(0,s.jsx)("p",{className:"text-sm text-amber-900 dark:text-amber-200",children:t.findings})})]}),t.supervisorRemarks&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider",children:"Supervisor Remarks"}),(0,s.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-100 dark:border-blue-800",children:(0,s.jsx)("p",{className:"text-sm text-blue-900 dark:text-blue-200",children:t.supervisorRemarks})})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-slate-700/50 px-6 py-4 flex justify-end gap-3",children:(0,s.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"Close"})})]})})]}):null}function tb(){let[e,t]=(0,r.useState)(!1),[a,u]=(0,r.useState)(!0),[b,p]=(0,r.useState)(!1),[y,j]=(0,r.useState)("permits"),{drillDown:N,resetFilters:f,resetDrillDown:v,getFilteredByDrillDown:k}=(0,g.useDashboard)(),{drillDown:w,resetFilters:C,resetDrillDown:S,getFilteredByDrillDown:Z}=(0,h.useInspection)(),A=k(),B=Z(),z="permits"===y?A.length:B.length;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-slate-900 ".concat(e?"dark":""),children:[(0,s.jsxs)("main",{className:"px-4 lg:px-8 py-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center bg-white dark:bg-slate-800 rounded-xl p-1 shadow-sm border border-gray-200 dark:border-slate-700",children:[(0,s.jsxs)("button",{onClick:()=>j("permits"),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("permits"===y?"bg-blue-600 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),"Permits"]}),(0,s.jsxs)("button",{onClick:()=>j("inspections"),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("inspections"===y?"bg-emerald-600 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-slate-700"),children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),"Inspections"]})]}),(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-slate-800 rounded-lg border border-gray-200 dark:border-slate-700",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Showing"}),(0,s.jsx)("span",{className:"text-sm font-bold ".concat("permits"===y?"text-blue-600":"text-emerald-600"),children:z}),(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:y})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>p(!b),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all border ".concat(b?"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700":"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 border-blue-200 dark:border-blue-800"),children:[b?(0,s.jsx)(i.Z,{className:"w-4 h-4"}):(0,s.jsx)(n.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:b?"Filters":"Hide"})]}),(0,s.jsx)("button",{onClick:()=>{"permits"===y?(f(),v()):(C(),S())},className:"p-2 text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-slate-800 rounded-lg transition-colors border border-transparent hover:border-gray-200 dark:hover:border-slate-700",title:"Reset & Refresh",children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{t(!e),document.documentElement.classList.toggle("dark")},className:"p-2 text-gray-600 dark:text-gray-300 hover:bg-white dark:hover:bg-slate-800 rounded-lg transition-colors border border-transparent hover:border-gray-200 dark:hover:border-slate-700",title:"Toggle theme",children:e?(0,s.jsx)(o.Z,{className:"w-4 h-4"}):(0,s.jsx)(x.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium border border-gray-200 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700 transition-all",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Export"})]})]})]}),"permits"===y&&(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("div",{className:"transition-all duration-300 ease-in-out flex-shrink-0 ".concat(b?"w-0 overflow-hidden opacity-0":"w-72 opacity-100"),children:(0,s.jsx)("div",{className:"sticky top-24",children:(0,s.jsx)(R,{isVertical:!0})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-6",children:[(0,s.jsx)(q,{}),(0,s.jsx)(T,{}),(0,s.jsx)(e1,{})]})]}),"inspections"===y&&(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("div",{className:"transition-all duration-300 ease-in-out flex-shrink-0 ".concat(b?"w-0 overflow-hidden opacity-0":"w-72 opacity-100"),children:(0,s.jsx)("div",{className:"sticky top-24",children:(0,s.jsx)(e6,{isVertical:!0})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0 space-y-6",children:[(0,s.jsx)(e7,{}),(0,s.jsx)(e2,{}),(0,s.jsx)(tm,{})]})]})]}),(0,s.jsx)(Q,{}),(0,s.jsx)(tu,{})]})}}},function(e){e.O(0,[118,910,971,69,744],function(){return e(e.s=31226)}),_N_E=e.O()}]);